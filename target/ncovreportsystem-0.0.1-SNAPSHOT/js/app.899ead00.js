(function(e){function t(t){for(var a,i,s=t[0],l=t[1],c=t[2],u=0,p=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(t);while(p.length)p.shift()();return n.push.apply(n,c||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,s=1;s<r.length;s++){var l=r[s];0!==o[l]&&(a=!1)}a&&(n.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},o={app:0},n=[];function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var a=r("85ec"),o=r.n(a);o.a},"053c":function(e,t,r){"use strict";var a=r("881d"),o=r.n(a);o.a},"347b":function(e,t,r){"use strict";var a=r("8106"),o=r.n(a);o.a},"47a0":function(e,t,r){"use strict";var a=r("ed4e"),o=r.n(a);o.a},"52aa":function(e,t,r){"use strict";var a=r("dae2"),o=r.n(a);o.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},n=[],i={name:"app",components:{}},s=i,l=(r("034f"),r("2877")),c=Object(l["a"])(s,o,n,!1,null,null,null),d=c.exports,u=r("8c4f"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"home-container"},[a("el-header",[a("div",[a("img",{attrs:{src:r("cf05"),alt:"",width:"30px"}}),a("span",[e._v("新冠病毒自动化办公系统")])]),a("span",[e._v("欢迎"+e._s(e.loginName)+"登录")]),a("el-button",{attrs:{type:"info",plain:"",size:"mini"},on:{click:e.logout}},[e._v("退出")])],1),a("el-container",[a("el-aside",{attrs:{width:e.isCollapse?"64px":"200px"}},[a("div",{staticClass:"toggle-button",on:{click:e.toggleCollapse}},[e._v("|||")]),a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.activePath,"background-color":"#373744","text-color":"#fff","active-text-color":"#409eff","unique-opened":"",collapse:e.isCollapse,"collapse-transition":!1,router:!0}},[a("el-submenu",{directives:[{name:"show",rawName:"v-show",value:e.rightList.hospitalManagement,expression:"rightList.hospitalManagement"}],attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-s-cooperation"}),a("span",[e._v("医院")])]),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:((e.rightList||{}).hospitalManagement||{}).hospitalAction,expression:"((rightList || {}).hospitalManagement || {}).hospitalAction"}],attrs:{index:"/hospitals"},on:{click:function(t){return e.saveNavState("/hospitals")}}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),a("span",[e._v("医院列表")])])],2),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:((e.rightList||{}).hospitalManagement||{}).departmentAction,expression:"((rightList || {}).hospitalManagement || {}).departmentAction"}],attrs:{index:"/departments"},on:{click:function(t){return e.saveNavState("/departments")}}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),a("span",[e._v("科室列表")])])],2),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:((e.rightList||{}).hospitalManagement||{}).doctorAction,expression:"((rightList || {}).hospitalManagement || {}).doctorAction"}],attrs:{index:"/doctors"},on:{click:function(t){return e.saveNavState("/doctors")}}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-user-solid"}),a("span",[e._v("医生列表")])])],2)],2),a("el-submenu",{directives:[{name:"show",rawName:"v-show",value:e.rightList.specimenManagement,expression:"rightList.specimenManagement"}],attrs:{index:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-s-help"}),a("span",[e._v("检测")])]),a("el-menu-item",{attrs:{index:"/specimens"},on:{click:function(t){return e.saveNavState("/specimens")}}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),a("span",[e._v("样本列表")])])],2)],2),a("el-submenu",{directives:[{name:"show",rawName:"v-show",value:e.rightList.userManagement,expression:"rightList.userManagement"}],attrs:{index:"3"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-user-solid"}),a("span",[e._v("用户管理")])]),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:((e.rightList||{}).userManagement||{}).userAction,expression:"((rightList || {}).userManagement || {}).userAction"}],attrs:{index:"/users"},on:{click:function(t){return e.saveNavState("/users")}}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),a("span",[e._v("用户列表")])])],2)],2),a("el-submenu",{directives:[{name:"show",rawName:"v-show",value:e.rightList.roleManagement,expression:"rightList.roleManagement"}],attrs:{index:"4"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-s-custom"}),a("span",[e._v("角色管理")])]),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:((e.rightList||{}).roleManagement||{}).roleAction,expression:"((rightList || {}).roleManagement || {}).roleAction"}],attrs:{index:"/roles"},on:{click:function(t){return e.saveNavState("/roles")}}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),a("span",[e._v("角色列表")])])],2)],2)],1)],1),a("el-main",[a("router-view")],1)],1)],1)},m=[],g=(r("96cf"),r("1da1")),f={data:function(){return{isCollapse:!1,activePath:"",rightList:[],loginName:""}},methods:{toggleCollapse:function(){this.isCollapse=!this.isCollapse,window.sessionStorage.setItem("isCollapse",this.isCollapse)},saveNavState:function(e){console.log("activePath"),window.sessionStorage.setItem("activePath",e),this.activePath=e},logout:function(){window.sessionStorage.clear(),this.$router.push("/login")},getRight:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loginName=window.sessionStorage.getItem("loginName"),t.next=3,e.$http.post("right/listByLoginName.do?loginName="+e.loginName);case 3:r=t.sent,a=r.data,e.rightList=a,window.sessionStorage.setItem("rightList",JSON.stringify(e.rightList));case 7:case"end":return t.stop()}}),t)})))()}},created:function(){this.getRight(),this.activePath=window.sessionStorage.getItem("activePath"),this.isCollapse=window.sessionStorage.getItem("isCollapse"),this.isCollapse="true"===this.isCollapse}},h=f,b=(r("82ff"),Object(l["a"])(h,p,m,!1,null,"5dd4c6e3",null)),v=b.exports,y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("医院")]),r("el-breadcrumb-item",[e._v("医院列表")])],1),r("el-card",{staticClass:"box-card"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("div",{staticClass:"grid-content bg-purple"},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:e.queryInfo.hosName,callback:function(t){e.$set(e.queryInfo,"hosName",t)},expression:"queryInfo.hosName"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getHospitalList},slot:"append"})],1)],1)]),(((e.rightList||{}).hospitalManagement||{}).hospitalAction||{}).saveHospital?r("el-col",{attrs:{span:6}},[r("div",{staticClass:"grid-content bg-purple"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialogVisable=!0}}},[e._v("添加医院")])],1)]):e._e()],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.pageResult.rows,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-row",{staticClass:"vcenter"},[r("el-col",{attrs:{span:5}},[r("el-tag",[e._v(e._s(t.row.hosName))]),r("i",{staticClass:"el-icon-caret-right"})],1),r("el-col",{attrs:{span:19}},e._l(t.row.departmentList,(function(t,a){return r("el-row",{key:t+a,class:["bdbottom","vcenter"]},[r("el-col",{attrs:{span:5}},[r("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.deptName))]),r("i",{staticClass:"el-icon-caret-right"})],1),r("el-col",{attrs:{span:19}},e._l(t.doctorList,(function(t,a){return r("el-tag",{key:t+a,attrs:{type:"warning"}},[e._v(e._s(t.docName))])})),1)],1)})),1)],1)]}}])}),r("el-table-column",{attrs:{type:"index",label:"#",width:"150"}}),r("el-table-column",{attrs:{prop:"hosName",label:"医院名称"}}),r("el-table-column",{attrs:{prop:"hosAddress",label:"医院地址"}}),(((e.rightList||{}).hospitalManagement||{}).hospitalAction||{}).updateHospital||(((e.rightList||{}).hospitalManagement||{}).hospitalAction||{}).deleteHospital?r("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{attrs:{effect:"dark",content:"编辑",placement:"top",enterable:!1}},[(((e.rightList||{}).hospitalManagement||{}).hospitalAction||{}).updateHospital?r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.showEditDialog(t.row.hosId)}}}):e._e()],1),(((e.rightList||{}).hospitalManagement||{}).hospitalAction||{}).deleteHospital?r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.deleteHospital(t.row.hosId)}}}):e._e()]}}],null,!1,2645677677)}):e._e()],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-sizes":[5,10,15,20],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageResult.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:"添加医院",visible:e.addDialogVisable,width:"40%"},on:{"update:visible":function(t){e.addDialogVisable=t},close:e.addDialogClosed}},[r("el-form",{ref:"addFormRef",staticClass:"demo-addForm",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"医院名称",prop:"hosName"}},[r("el-input",{model:{value:e.addForm.hosName,callback:function(t){e.$set(e.addForm,"hosName",t)},expression:"addForm.hosName"}})],1),r("el-form-item",{attrs:{label:"医院地址",prop:"hosAddress"}},[r("el-input",{model:{value:e.addForm.hosAddress,callback:function(t){e.$set(e.addForm,"hosAddress",t)},expression:"addForm.hosAddress"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisable=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addHosipital}},[e._v("确 定")])],1)],1)],1),r("el-dialog",{attrs:{title:"修改医院信息",visible:e.editDialogVisable,width:"40%"},on:{"update:visible":function(t){e.editDialogVisable=t},close:e.editDialogClosed}},[r("el-form",{ref:"editFormRef",staticClass:"demo-addForm",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"医院名称",prop:"hosName"}},[r("el-input",{model:{value:e.editForm.hosName,callback:function(t){e.$set(e.editForm,"hosName",t)},expression:"editForm.hosName"}})],1),r("el-form-item",{attrs:{label:"医院地址",prop:"hosAddress"}},[r("el-input",{model:{value:e.editForm.hosAddress,callback:function(t){e.$set(e.editForm,"hosAddress",t)},expression:"editForm.hosAddress"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisable=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.updateHospital}},[e._v("确 定")])],1)],1)],1)},I=[],w={data:function(){return{pageResult:{total:0,rows:[]},queryInfo:{pageNum:1,pageSize:5,hosName:""},addDialogVisable:!1,addForm:{hosName:"",hosAddress:""},addFormRules:{hosName:[{required:!0,message:"请输入医院名",trigger:"blur"}]},editDialogVisable:!1,editForm:{hosId:0,hosName:"",hosAddress:""},editFormRules:{hosName:[{required:!0,message:"请输入医院名",trigger:"blur"}]},rightList:{}}},created:function(){var e=this;this.getRight().then((function(t){e.getHospitalList()}))},methods:{handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getHospitalList()},handleCurrentChange:function(e){this.queryInfo.pageNum=e,this.getHospitalList()},addDialogClosed:function(){this.$refs.addFormRef.resetFields()},addHosipital:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=10;break}return t.next=3,e.$http.post("hospital/save.do",e.addForm);case 3:if(a=t.sent,o=a.data,e.addDialogVisable=!1,!o.success){t.next=9;break}return e.getHospitalList(),t.abrupt("return",e.$message({message:"添加医院成功",type:"success"}));case 9:return t.abrupt("return",e.$message.error("添加医院失败"));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},showEditDialog:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("hospital/getById.do?hosId="+e);case 2:a=r.sent,o=a.data,t.editForm=o,t.editDialogVisable=!0;case 6:case"end":return r.stop()}}),r)})))()},editDialogClosed:function(){this.$refs.editFormRef.resetFields()},getHospitalList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if((((e.rightList||{}).hospitalManagement||{}).hospitalAction||{}).selectHospital){t.next=2;break}return t.abrupt("return",e.$message.error("对不起，您没有查看医院的权限"));case 2:return t.next=4,e.$http.post("hospital/list.do?pageNum="+e.queryInfo.pageNum+"&pageSize="+e.queryInfo.pageSize,{hosName:e.queryInfo.hosName});case 4:r=t.sent,a=r.data,e.pageResult=a;case 7:case"end":return t.stop()}}),t)})))()},updateHospital:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.editFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=10;break}return t.next=3,e.$http.post("hospital/update.do",e.editForm);case 3:if(a=t.sent,o=a.data,e.editDialogVisable=!1,!o.success){t.next=9;break}return e.getHospitalList(),t.abrupt("return",e.$message({message:"修改医院信息成功",type:"success"}));case 9:return t.abrupt("return",e.$message.error("修改医院信息失败"));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},deleteHospital:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$confirm("此操作将永久删除该医院, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("hospital/delete.do?hosId="+e);case 2:if(a=r.sent,o=a.data,!o.success){r.next=7;break}return t.getHospitalList(),r.abrupt("return",t.$message({type:"success",message:"删除成功!"}));case 7:return r.abrupt("return",t.$message.error("删除医院信息失败"));case 8:case"end":return r.stop()}}),r)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}));case 1:case"end":return r.stop()}}),r)})))()},getRight:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=window.sessionStorage.getItem("loginName"),t.next=3,e.$http.post("right/listByLoginName.do?loginName="+r);case 3:a=t.sent,o=a.data,e.rightList=o;case 6:case"end":return t.stop()}}),t)})))()}}},R=w,F=(r("47a0"),Object(l["a"])(R,y,I,!1,null,"8500c6b0",null)),k=F.exports,x=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("医院")]),r("el-breadcrumb-item",[e._v("医生列表")])],1),r("el-card",{staticClass:"box-card"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:5}},[r("div",{staticClass:"grid-content bg-purple"},[r("el-select",{attrs:{placeholder:"请选择医院",filterable:"",remote:"","remote-method":e.getHospitalList},on:{change:e.searchHospitalSelectChanged},model:{value:e.queryInfo.hosId,callback:function(t){e.$set(e.queryInfo,"hosId",t)},expression:"queryInfo.hosId"}},[r("el-option",{key:"0",attrs:{label:"全部医院",value:"0"}}),e._l(e.hospitalList,(function(e){return r("el-option",{key:e.hosId,attrs:{label:e.hosName,value:e.hosId}})}))],2)],1)]),r("el-col",{attrs:{span:5}},[r("div",{staticClass:"grid-content bg-purple"},[r("el-select",{attrs:{placeholder:"请选择科室",filterable:"",remote:"","remote-method":e.getDepartmentList},on:{change:e.getDepartmentList},model:{value:e.queryInfo.deptId,callback:function(t){e.$set(e.queryInfo,"deptId",t)},expression:"queryInfo.deptId"}},[r("el-option",{key:"0",attrs:{label:"全部科室",value:"0"}}),e._l(e.departmentList,(function(e){return r("el-option",{key:e.deptId,attrs:{label:e.deptName,value:e.deptId}})}))],2)],1)]),r("el-col",{attrs:{span:5}},[r("div",{staticClass:"grid-content bg-purple"},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入医生名"},model:{value:e.queryInfo.docName,callback:function(t){e.$set(e.queryInfo,"docName",t)},expression:"queryInfo.docName"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getDoctorList},slot:"append"})],1)],1)]),(((e.rightList||{}).hospitalManagement||{}).doctorAction||{}).saveDoctor?r("el-col",{attrs:{span:6}},[r("div",{staticClass:"grid-content bg-purple"},[r("el-button",{attrs:{type:"primary"},on:{click:e.showAddDialog}},[e._v("添加医生")])],1)]):e._e()],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.pageResult.rows,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"index",label:"#",width:"150"}}),r("el-table-column",{attrs:{prop:"department.hospital.hosName",label:"医院名称"}}),r("el-table-column",{attrs:{prop:"department.deptName",label:"科室名称"}}),r("el-table-column",{attrs:{prop:"docName",label:"医生名称"}}),r("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{attrs:{effect:"dark",content:"编辑",placement:"top",enterable:!1}},[(((e.rightList||{}).hospitalManagement||{}).doctorAction||{}).updateDoctor?r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.showEditDialog(t.row.docId)}}}):e._e()],1),(((e.rightList||{}).hospitalManagement||{}).doctorAction||{}).deleteDoctor?r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.deleteDoctor(t.row.docId)}}}):e._e()]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-sizes":[5,10,15,20],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageResult.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:"添加医生",visible:e.addDialogVisable,width:"40%"},on:{"update:visible":function(t){e.addDialogVisable=t},close:e.addDialogClosed}},[r("el-form",{ref:"addFormRef",staticClass:"demo-addForm",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"医院名称"}},[r("el-select",{attrs:{placeholder:"请选择医院"},on:{change:e.searchHospitalSelectChanged},model:{value:e.addForm.hosId,callback:function(t){e.$set(e.addForm,"hosId",t)},expression:"addForm.hosId"}},e._l(e.hospitalList,(function(e){return r("el-option",{key:e.hosId,attrs:{label:e.hosName,value:e.hosId}})})),1)],1),r("el-form-item",{attrs:{label:"科室名称"}},[r("el-select",{attrs:{placeholder:"请选择科室"},model:{value:e.addForm.deptId,callback:function(t){e.$set(e.addForm,"deptId",t)},expression:"addForm.deptId"}},e._l(e.departmentList,(function(e){return r("el-option",{key:e.deptId,attrs:{label:e.deptName,value:e.deptId}})})),1)],1),r("el-form-item",{attrs:{label:"医生名称",prop:"docName"}},[r("el-input",{model:{value:e.addForm.docName,callback:function(t){e.$set(e.addForm,"docName",t)},expression:"addForm.docName"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisable=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addDoctor}},[e._v("确 定")])],1)],1)],1),r("el-dialog",{attrs:{title:"修改医生信息",visible:e.editDialogVisable,width:"40%"},on:{"update:visible":function(t){e.editDialogVisable=t},close:e.editDialogClosed}},[r("el-form",{ref:"editFormRef",staticClass:"demo-editForm",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"医院名称"}},[r("el-select",{attrs:{placeholder:"请选择医院"},on:{change:e.editHospitalChanged},model:{value:e.editForm.department.hosId,callback:function(t){e.$set(e.editForm.department,"hosId",t)},expression:"editForm.department.hosId"}},e._l(e.hospitalList,(function(e){return r("el-option",{key:e.hosId,attrs:{label:e.hosName,value:e.hosId}})})),1)],1),r("el-form-item",{attrs:{label:"科室名称"}},[r("el-select",{attrs:{placeholder:"请选择科室"},model:{value:e.editForm.deptId,callback:function(t){e.$set(e.editForm,"deptId",t)},expression:"editForm.deptId"}},e._l(e.departmentList,(function(e){return r("el-option",{key:e.deptId,attrs:{label:e.deptName,value:e.deptId}})})),1)],1),r("el-form-item",{attrs:{label:"医生名称",prop:"docName"}},[r("el-input",{model:{value:e.editForm.docName,callback:function(t){e.$set(e.editForm,"docName",t)},expression:"editForm.docName"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisable=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.updateDoctor}},[e._v("确 定")])],1)],1)],1)},N=[],$={data:function(){return{pageResult:{total:0,rows:[]},hospitalList:[{hosId:""}],departmentList:[{deptId:""}],queryInfo:{docName:"",pageNum:1,pageSize:5,hosId:"",deptId:""},addDialogVisable:!1,addForm:{hosId:"",deptId:"",docName:""},addFormRules:{docName:[{required:!0,message:"请输入医生名",trigger:"blur"}]},editDialogVisable:!1,editForm:{docId:"",department:{hosId:0},docName:""},editFormRules:{docName:[{required:!0,message:"请输入医生名",trigger:"blur"}]},rightList:{}}},created:function(){var e=this;this.getRight().then((function(t){e.getHospitalList(),e.getDoctorList()}))},methods:{handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getDoctorList()},handleCurrentChange:function(e){this.queryInfo.pageNum=e,this.getDoctorList()},addDialogClosed:function(){this.$refs.addFormRef.resetFields()},addDoctor:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=10;break}return t.next=3,e.$http.post("doctor/save.do",e.addForm);case 3:if(a=t.sent,o=a.data,e.addDialogVisable=!1,!o.success){t.next=9;break}return e.getDoctorList(),t.abrupt("return",e.$message({message:"添加医生成功",type:"success"}));case 9:return t.abrupt("return",e.$message.error("添加医生失败"));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},showEditDialog:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("doctor/getById.do?docId="+e);case 2:a=r.sent,o=a.data,t.getHospitalList(),t.editForm=o,console.log("this.editForm"),console.log(t.editForm),t.editDialogVisable=!0;case 9:case"end":return r.stop()}}),r)})))()},editDialogClosed:function(){this.$refs.editFormRef.resetFields()},getHospitalList:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("hospital/list.do?pageNum="+t.queryInfo.pageNum+"&pageSize="+t.queryInfo.pageSize,{hosName:e});case 2:a=r.sent,o=a.data,t.hospitalList=o.rows;case 5:case"end":return r.stop()}}),r)})))()},getDepartmentList:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("department/listAll.do",{hosId:t.queryInfo.hosId,deptName:e});case 2:a=r.sent,o=a.data,t.departmentList=o;case 5:case"end":return r.stop()}}),r)})))()},showAddDialog:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getHospitalList(),e.getDepartmentList(),""!==e.queryInfo.hosId&&"0"!==e.queryInfo.hosId?e.addForm.hosId=e.queryInfo.hosId:e.addForm.hosId=e.hospitalList[0].hosId,""!==e.queryInfo.deptId&&"0"!==e.queryInfo.deptId?e.addForm.deptId=e.queryInfo.deptId:e.addForm.deptId=e.hospitalList[0].deptId,e.addDialogVisable=!0;case 5:case"end":return t.stop()}}),t)})))()},getDoctorList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if((((e.rightList||{}).hospitalManagement||{}).doctorAction||{}).selectDoctor){t.next=2;break}return t.abrupt("return",e.$message.error("对不起，您没有查看医生的权限"));case 2:return console.log(e.queryInfo),t.next=5,e.$http.post("doctor/list.do?pageNum="+e.queryInfo.pageNum+"&pageSize="+e.queryInfo.pageSize,{docName:e.queryInfo.docName,deptId:e.queryInfo.deptId});case 5:r=t.sent,a=r.data,e.pageResult=a,console.log(e.pageResult);case 9:case"end":return t.stop()}}),t)})))()},updateDoctor:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.editFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=10;break}return t.next=3,e.$http.post("doctor/update.do",e.editForm);case 3:if(a=t.sent,o=a.data,e.editDialogVisable=!1,!o.success){t.next=9;break}return e.getDoctorList(),t.abrupt("return",e.$message({message:"修改医生信息成功",type:"success"}));case 9:return t.abrupt("return",e.$message.error("修改医生信息失败"));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},deleteDoctor:function(e){var t=this;this.$confirm("此操作将永久删除该医生, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("doctor/delete.do?docId="+e);case 2:if(a=r.sent,o=a.data,!o.success){r.next=7;break}return t.getDoctorList(),r.abrupt("return",t.$message({type:"success",message:"删除成功!"}));case 7:return r.abrupt("return",t.$message.error("删除失败"));case 8:case"end":return r.stop()}}),r)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},searchHospitalSelectChanged:function(){this.getDepartmentList(),this.getDoctorList()},editHospitalChanged:function(){console.log("this.editForm..............."),console.log(this.editForm)},getRight:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=window.sessionStorage.getItem("loginName"),t.next=3,e.$http.post("right/listByLoginName.do?loginName="+r);case 3:a=t.sent,o=a.data,e.rightList=o;case 6:case"end":return t.stop()}}),t)})))()}}},L=$,_=Object(l["a"])(L,x,N,!1,null,"f794ac1c",null),D=_.exports,C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("医院")]),r("el-breadcrumb-item",[e._v("科室列表")])],1),r("el-card",{staticClass:"box-card"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:5}},[r("div",{staticClass:"grid-content bg-purple"},[r("el-select",{attrs:{placeholder:"请选择医院",filterable:"",remote:"","remote-method":e.getHospitalList},on:{change:e.searchHospitalSelectChanged},model:{value:e.queryInfo.hosId,callback:function(t){e.$set(e.queryInfo,"hosId",t)},expression:"queryInfo.hosId"}},[r("el-option",{key:"0",attrs:{label:"全部医院",value:"0"}}),e._l(e.hospitalList,(function(e){return r("el-option",{key:e.hosId,attrs:{label:e.hosName,value:e.hosId}})}))],2)],1)]),r("el-col",{attrs:{span:5}},[r("div",{staticClass:"grid-content bg-purple"},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入科室名"},model:{value:e.queryInfo.deptName,callback:function(t){e.$set(e.queryInfo,"deptName",t)},expression:"queryInfo.deptName"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getDepartmentList},slot:"append"})],1)],1)]),(((e.rightList||{}).hospitalManagement||{}).departmentAction||{}).saveDepartment?r("el-col",{attrs:{span:6}},[r("div",{staticClass:"grid-content bg-purple"},[r("el-button",{attrs:{type:"primary"},on:{click:e.showAddDialog}},[e._v("添加科室")])],1)]):e._e()],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.pageResult.rows,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"index",label:"#",width:"150"}}),r("el-table-column",{attrs:{prop:"hospital.hosName",label:"医院名称"}}),r("el-table-column",{attrs:{prop:"deptName",label:"科室名称"}}),(((e.rightList||{}).hospitalManagement||{}).departmentAction||{}).deleteDepartment||(((e.rightList||{}).hospitalManagement||{}).departmentAction||{}).updateDepartment?r("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{attrs:{effect:"dark",content:"编辑",placement:"top",enterable:!1}},[(((e.rightList||{}).hospitalManagement||{}).departmentAction||{}).updateDepartment?r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.showEditDialog(t.row.deptId)}}}):e._e()],1),(((e.rightList||{}).hospitalManagement||{}).departmentAction||{}).deleteDepartment?r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.deleteDepartment(t.row.deptId)}}}):e._e()]}}],null,!1,2025645789)}):e._e()],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-sizes":[5,10,15,20],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageResult.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:"添加科室",visible:e.addDialogVisable,width:"40%"},on:{"update:visible":function(t){e.addDialogVisable=t},close:e.addDialogClosed}},[r("el-form",{ref:"addFormRef",staticClass:"demo-addForm",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"医院名称"}},[r("el-select",{attrs:{placeholder:"请选择医院"},model:{value:e.addForm.hosId,callback:function(t){e.$set(e.addForm,"hosId",t)},expression:"addForm.hosId"}},e._l(e.hospitalList,(function(e){return r("el-option",{key:e.hosId,attrs:{label:e.hosName,value:e.hosId}})})),1)],1),r("el-form-item",{attrs:{label:"科室名称",prop:"deptName"}},[r("el-input",{model:{value:e.addForm.deptName,callback:function(t){e.$set(e.addForm,"deptName",t)},expression:"addForm.deptName"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisable=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addDepartment}},[e._v("确 定")])],1)],1)],1),r("el-dialog",{attrs:{title:"修改科室信息",visible:e.editDialogVisable,width:"40%"},on:{"update:visible":function(t){e.editDialogVisable=t},close:e.editDialogClosed}},[r("el-form",{ref:"editFormRef",staticClass:"demo-addForm",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"医院名称"}},[r("el-select",{attrs:{placeholder:"请选择医院"},model:{value:e.editForm.hospital.hosId,callback:function(t){e.$set(e.editForm.hospital,"hosId",t)},expression:"editForm.hospital.hosId"}},[r("el-option",{key:"0",attrs:{label:"全部医院",value:"0"}}),e._l(e.hospitalList,(function(e){return r("el-option",{key:e.hosId,attrs:{label:e.hosName,value:e.hosId}})}))],2)],1),r("el-form-item",{attrs:{label:"科室名称",prop:"deptName"}},[r("el-input",{model:{value:e.editForm.deptName,callback:function(t){e.$set(e.editForm,"deptName",t)},expression:"editForm.deptName"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisable=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.updateDepartment}},[e._v("确 定")])],1)],1)],1)},T=[],S={data:function(){return{pageResult:{total:0,rows:[]},hospitalList:[{hosId:""}],queryInfo:{deptName:"",pageNum:1,pageSize:5,hosId:""},addDialogVisable:!1,addForm:{hosId:"",deptId:"",deptName:""},addFormRules:{deptName:[{required:!0,message:"请输入科室名",trigger:"blur"}]},editDialogVisable:!1,editForm:{hospital:{hosId:"",hosName:"",hosAddress:""},deptId:"",deptName:""},editFormRules:{deptName:[{required:!0,message:"请输入科室名",trigger:"blur"}]},rightList:{}}},created:function(){var e=this;this.getRightList().then((function(t){e.getDepartmentList(),e.getHospitalList()}))},methods:{handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getDepartmentList()},handleCurrentChange:function(e){this.queryInfo.pageNum=e,this.getDepartmentList()},addDialogClosed:function(){this.$refs.addFormRef.resetFields()},addDepartment:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=10;break}return t.next=3,e.$http.post("department/save.do",e.addForm);case 3:if(a=t.sent,o=a.data,e.addDialogVisable=!1,!o.success){t.next=9;break}return e.getDepartmentList(),t.abrupt("return",e.$message({message:"添加科室成功",type:"success"}));case 9:return t.abrupt("return",e.$message.error("添加科室失败"));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},showEditDialog:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("department/getById.do?deptId="+e);case 2:a=r.sent,o=a.data,t.getHospitalList(),t.editForm=o,console.log(t.editForm),t.editDialogVisable=!0;case 8:case"end":return r.stop()}}),r)})))()},editDialogClosed:function(){this.$refs.editFormRef.resetFields()},getHospitalList:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("hospital/listAll.do",{hosName:e});case 2:a=r.sent,o=a.data,t.hospitalList=o;case 5:case"end":return r.stop()}}),r)})))()},showAddDialog:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getHospitalList(),""!==e.queryInfo.hosId&&"0"!==e.queryInfo.hosId?(console.log(e.queryInfo.hosId),e.addForm.hosId=e.queryInfo.hosId):e.addForm.hosId=e.hospitalList[0].hosId,e.addDialogVisable=!0;case 3:case"end":return t.stop()}}),t)})))()},getDepartmentList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if((((e.rightList||{}).hospitalManagement||{}).departmentAction||{}).selectDepartment){t.next=2;break}return t.abrupt("return",e.$message.error("对不起，您没有查看科室的权限"));case 2:return t.next=4,e.$http.post("department/list.do?pageNum="+e.queryInfo.pageNum+"&pageSize="+e.queryInfo.pageSize,{deptName:e.queryInfo.deptName,hosId:e.queryInfo.hosId});case 4:r=t.sent,a=r.data,e.pageResult=a,console.log(e.pageResult);case 8:case"end":return t.stop()}}),t)})))()},updateDepartment:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.editFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=10;break}return t.next=3,e.$http.post("department/update.do",e.editForm);case 3:if(a=t.sent,o=a.data,e.editDialogVisable=!1,!o.success){t.next=9;break}return e.getDepartmentList(),t.abrupt("return",e.$message({message:"修改科室信息成功",type:"success"}));case 9:return t.abrupt("return",e.$message.error("修改科室信息失败"));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},deleteDepartment:function(e){var t=this;this.$confirm("此操作将永久删除该科室, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("department/delete.do?deptId="+e);case 2:if(a=r.sent,o=a.data,!o.success){r.next=7;break}return t.getDepartmentList(),r.abrupt("return",t.$message({type:"success",message:"删除成功!"}));case 7:return r.abrupt("return",t.$message.error("删除失败"));case 8:case"end":return r.stop()}}),r)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},searchHospitalSelectChanged:function(){this.getDepartmentList()},getRightList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=window.sessionStorage.getItem("loginName"),t.next=3,e.$http.post("right/listByLoginName.do?loginName="+r);case 3:a=t.sent,o=a.data,e.rightList=o;case 6:case"end":return t.stop()}}),t)})))()}}},q=S,V=Object(l["a"])(q,C,T,!1,null,"6cdf213a",null),A=V.exports,M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("检测样本")]),r("el-breadcrumb-item",[e._v("检测样本列表")])],1),r("el-card",{staticClass:"box-card"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:5}},[r("div",[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入样本条码"},on:{change:e.getSpecimenList},model:{value:e.queryInfo.specimenCode,callback:function(t){e.$set(e.queryInfo,"specimenCode",t)},expression:"queryInfo.specimenCode"}})],1)]),r("el-col",{attrs:{span:4}},[r("el-select",{attrs:{placeholder:"选择样本类型"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.queryInfo.specimenTypeId,callback:function(t){e.$set(e.queryInfo,"specimenTypeId",t)},expression:"queryInfo.specimenTypeId"}},[r("el-option",{key:"",attrs:{label:"全部",value:""}}),e._l(e.specimenTypeList,(function(e){return r("el-option",{key:e.dictId,attrs:{label:e.dictValue,value:e.dictId}})}))],2)],1),r("el-col",{attrs:{span:4}},[r("el-select",{attrs:{placeholder:"是否生成报告"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.queryInfo.specimenStatusId,callback:function(t){e.$set(e.queryInfo,"specimenStatusId",t)},expression:"queryInfo.specimenStatusId"}},[r("el-option",{key:"",attrs:{label:"全部",value:""}}),r("el-option",{key:"0",attrs:{label:"未生成报告",value:"0"}}),r("el-option",{key:"1",attrs:{label:"生成报告",value:"1"}})],1)],1),r("el-col",{attrs:{span:4}},[r("el-select",{attrs:{placeholder:"选择检测项目"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.queryInfo.testTypeId,callback:function(t){e.$set(e.queryInfo,"testTypeId",t)},expression:"queryInfo.testTypeId"}},e._l(e.testTypeList,(function(e){return r("el-option",{key:e.dictId,attrs:{label:e.dictValue,value:e.dictId}})})),1)],1),r("el-col",{directives:[{name:"show",rawName:"v-show",value:(((e.rightList||{}).specimenManagement||{}).reportAction||{}).batchCreateNegativeReport,expression:"(((rightList || {}).specimenManagement || {}).reportAction||{}).batchCreateNegativeReport"}],attrs:{span:4}},[r("el-button",{attrs:{type:"success",disabled:!e.batchCreateNegativeReportBtnVisable},on:{click:e.showBatchCreateNegativeReportDialog}},[e._v("全部导出为阴性报告")])],1)],1),r("br"),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:7}},[r("div",[r("center",{staticClass:"date-title"},[e._v("采样日期")]),r("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"截至日期","unlink-panels":"",format:"yyyy年MM月dd日","value-format":"yyyy年MM月dd日"},on:{blur:function(t){return e.$forceUpdate()}},model:{value:e.queryInfo.createTimeRange,callback:function(t){e.$set(e.queryInfo,"createTimeRange",t)},expression:"queryInfo.createTimeRange"}})],1)]),r("el-col",{attrs:{span:7}},[r("div",{staticClass:"block"},[r("center",{staticClass:"date-title"},[e._v("接收日期")]),r("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"截至日期","unlink-panels":"",format:"yyyy年MM月dd日","value-format":"yyyy年MM月dd日"},on:{blur:function(t){return e.$forceUpdate()}},model:{value:e.queryInfo.recvTimeRange,callback:function(t){e.$set(e.queryInfo,"recvTimeRange",t)},expression:"queryInfo.recvTimeRange"}})],1)]),r("el-col",{attrs:{span:7}},[r("div",{staticClass:"block"},[r("center",{staticClass:"date-title"},[e._v("报告生成日期")]),r("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"截至日期","unlink-panels":"",format:"yyyy年MM月dd日","value-format":"yyyy年MM月dd日",disabled:1!=e.queryInfo.specimenStatusId},on:{blur:function(t){return e.$forceUpdate()}},model:{value:e.queryInfo.reportTimeRange,callback:function(t){e.$set(e.queryInfo,"reportTimeRange",t)},expression:"queryInfo.reportTimeRange"}})],1)])],1),r("br"),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:4}},[r("div",[r("el-select",{attrs:{placeholder:"选择送检医院",filterable:"",remote:"","remote-method":e.getHospitalList},on:{change:function(t){return e.getDepartmentListByHosId(e.queryInfo.hosId)},"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.queryInfo.hosId,callback:function(t){e.$set(e.queryInfo,"hosId",t)},expression:"queryInfo.hosId"}},[r("el-option",{key:"0",attrs:{label:"全部",value:"0"}}),e._l(e.hospitalList,(function(e){return r("el-option",{key:e.hosId,attrs:{label:e.hosName,value:e.hosId}})}))],2)],1)]),r("el-col",{attrs:{span:4}},[r("div",[r("el-select",{attrs:{placeholder:"选择送检科室",filterable:""},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.queryInfo.deptId,callback:function(t){e.$set(e.queryInfo,"deptId",t)},expression:"queryInfo.deptId"}},[r("el-option",{key:"",attrs:{label:"全部",value:""}}),e._l(e.departmentList,(function(e){return r("el-option",{key:e.deptId,attrs:{label:e.deptName,value:e.deptId}})}))],2)],1)]),r("el-col",{attrs:{span:4}},[r("div",[r("el-select",{attrs:{placeholder:"选择排序规则"},model:{value:e.queryInfo.sortRule,callback:function(t){e.$set(e.queryInfo,"sortRule",t)},expression:"queryInfo.sortRule"}},[r("el-option",{key:"0",attrs:{label:"自然排序",value:"0"}}),r("el-option",{key:"1",attrs:{label:"门诊号",value:"1"}}),r("el-option",{key:"2",attrs:{label:"接收时间",value:"2"}}),r("el-option",{key:"3",attrs:{label:"创建时间",value:"3"}}),r("el-option",{key:"4",attrs:{label:"样本码",value:"4"}}),r("el-option",{key:"5",attrs:{label:"检测项目",value:"5"}}),r("el-option",{key:"6",attrs:{label:"医院",value:"6"}})],1)],1)]),r("el-col",{attrs:{span:4}},[r("div",[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"病人名字"},on:{change:e.getSpecimenList},model:{value:e.queryInfo.patientName,callback:function(t){e.$set(e.queryInfo,"patientName",t)},expression:"queryInfo.patientName"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getSpecimenList},slot:"append"})],1)],1)]),e.rightList.specimenManagement&&(((e.rightList||{}).specimenManagement||{}).specimenAction||{}).saveSpecimen?r("el-col",{attrs:{span:3}},[r("div",[r("el-button",{attrs:{type:"primary"},on:{click:e.showAddDialog}},[e._v("添加检测样本")])],1)]):e._e(),(((e.rightList||{}).specimenManagement||{}).specimenAction||{}).bathImportSpecimen?r("el-col",{attrs:{span:5}},[r("div",[r("el-upload",{staticClass:"upload-demo",attrs:{name:"uploadFile",action:e.$http.defaults.baseURL+"specimen/uploadFromFile.do","on-success":e.batchImportSuccess}},[r("el-button",{attrs:{type:"success"}},[e._v("从Excel导入")]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传excel表格文件")])],1)],1)]):e._e()],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.pageResult.rows,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-table",{staticStyle:{width:"100%"},attrs:{data:[t.row],border:"",stripe:""}},[r("el-table-column",{attrs:{prop:"specimenSituation.dictValue",label:"样本情况"}}),r("el-table-column",{attrs:{prop:"patientAge",label:"患者年龄"}}),r("el-table-column",{attrs:{prop:"patientGender",label:"患者性别"}}),r("el-table-column",{attrs:{prop:"patientTellphone",label:"联系电话"}}),r("el-table-column",{attrs:{prop:"bedNum",label:"床位"}}),1==t.row.specimenStatusId?r("el-table-column",{attrs:{prop:"report.specimenResult.dictValue",label:"检测结果"}}):e._e(),1==t.row.specimenStatusId?r("el-table-column",{attrs:{prop:"report.referenceValue.dictValue",label:"参考值"}}):e._e(),r("el-table-column",{attrs:{prop:"report.createTime",label:"报告创建时间"}}),1==t.row.specimenStatusId?r("el-table-column",{attrs:{prop:"report.reporter.managerName",label:"报告者"}}):e._e(),1==t.row.specimenStatusId?r("el-table-column",{attrs:{prop:"report.reviewer.managerName",label:"审核者"}}):e._e()],1)]}}])}),r("el-table-column",{attrs:{type:"index",label:"#",width:"43"}}),r("el-table-column",{attrs:{prop:"specimenCode",label:"样本码",sortable:""}}),r("el-table-column",{attrs:{prop:"specimenType.dictValue",label:"样本类型"}}),r("el-table-column",{attrs:{prop:"testType.dictValue",label:"检测项目",sortable:""}}),r("el-table-column",{attrs:{prop:"patientName",label:"患者姓名"}}),r("el-table-column",{attrs:{prop:"patientAge",label:"年龄"}}),r("el-table-column",{attrs:{prop:"patientGender",label:"性别",width:"43"}}),r("el-table-column",{attrs:{prop:"specimenStatusId",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.specimenStatusId?r("span",[r("el-tag",{attrs:{type:"success"}},[e._v("报告")])],1):e._e(),0==t.row.specimenStatusId?r("span",[r("el-tag",[e._v("未报告")])],1):e._e(),2==t.row.specimenStatusId?r("span",[r("el-tag",{attrs:{type:"info"}},[e._v("已删除")])],1):e._e()]}}])}),r("el-table-column",{attrs:{prop:"hospital.hosName",label:"医院",sortable:""}}),r("el-table-column",{attrs:{prop:"department.deptName",label:"科室"}}),r("el-table-column",{attrs:{prop:"doctor.docName",label:"医生"}}),r("el-table-column",{attrs:{prop:"doorNum",label:"门诊号",sortable:"","sort-method":e.sortByDoorNum}}),r("el-table-column",{attrs:{prop:"createTime",label:"创建时间",sortable:""}}),r("el-table-column",{attrs:{prop:"recvTime",label:"接收时间",sortable:""}}),r("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{attrs:{effect:"dark",content:0==t.row.specimenStatusId?"生成报告":"编辑报告",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"success",icon:"el-icon-document-checked",size:"mini"},on:{click:function(r){0==t.row.specimenStatusId?e.showAddReportDialog(t.row.specimenId,t.row.testTypeId):e.showEditReportDialog(t.row)}}})],1),r("el-tooltip",{attrs:{effect:"dark",content:"编辑标本",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.showEditDialog(t.row)}}})],1),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.deleteSpecimen(t.row)}}})]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-sizes":[5,10,15,20],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageResult.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:"添加检测样本",visible:e.addDialogVisable},on:{"update:visible":function(t){e.addDialogVisable=t},close:e.addDialogClosed}},[r("el-form",{ref:"addFormRef",staticClass:"demo-addForm",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"样本条码",prop:"specimenCode"}},[r("el-input",{ref:"specimenCodeRef",model:{value:e.addForm.specimenCode,callback:function(t){e.$set(e.addForm,"specimenCode",t)},expression:"addForm.specimenCode"}})],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"检测项目",prop:"testTypeId"}},[r("el-select",{attrs:{placeholder:"选择检测项目"},on:{"visible-change":function(t){return e.$forceUpdate()},change:function(t){return e.addFormTestTypeChanged()}},model:{value:e.addForm.testTypeId,callback:function(t){e.$set(e.addForm,"testTypeId",t)},expression:"addForm.testTypeId"}},e._l(e.testTypeList,(function(e){return r("el-option",{key:e.dictId,attrs:{label:e.dictValue,value:e.dictId}})})),1)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"样本类型",prop:"specimenTypeId"}},[r("el-select",{attrs:{placeholder:"选择样本类型"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.addForm.specimenTypeId,callback:function(t){e.$set(e.addForm,"specimenTypeId",t)},expression:"addForm.specimenTypeId"}},e._l(e.specimenTypeList,(function(e){return r("el-option",{key:e.dictId,attrs:{label:e.dictValue,value:e.dictId}})})),1)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"样本状况",prop:"specimenSituationId"}},[r("el-select",{attrs:{placeholder:"选择样本状况"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.addForm.specimenSituationId,callback:function(t){e.$set(e.addForm,"specimenSituationId",t)},expression:"addForm.specimenSituationId"}},e._l(e.specimenSituationList,(function(e){return r("el-option",{key:e.dictId,attrs:{label:e.dictValue,value:e.dictId}})})),1)],1)],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"送检医院",prop:"hosId"}},[r("el-select",{attrs:{placeholder:"选择送检医院",filterable:"",remote:"","remote-method":e.getHospitalList},on:{change:function(t){return e.getDepartmentListByHosId(e.addForm.hosId)},"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.addForm.hosId,callback:function(t){e.$set(e.addForm,"hosId",t)},expression:"addForm.hosId"}},e._l(e.hospitalList,(function(t){return r("el-option",{key:t.hosId,attrs:{label:t.hosName,value:t.hosId},on:{"visible-change":function(t){return e.$forceUpdate()}}})})),1)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"送检科室",prop:"deptId"}},[r("el-select",{attrs:{placeholder:"选择送检科室",filterable:""},on:{change:function(t){return e.getDoctorListByDeptId(e.addForm.deptId)},"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.addForm.deptId,callback:function(t){e.$set(e.addForm,"deptId",t)},expression:"addForm.deptId"}},e._l(e.departmentList,(function(e){return r("el-option",{key:e.deptId,attrs:{label:e.deptName,value:e.deptId}})})),1)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"送检医生",prop:"docId"}},[r("el-select",{attrs:{placeholder:"选择送检医生"},model:{value:e.addForm.docId,callback:function(t){e.$set(e.addForm,"docId",t)},expression:"addForm.docId"}},e._l(e.doctorList,(function(t){return r("el-option",{key:t.docId,attrs:{label:t.docName,value:t.docId},on:{"visible-change":function(t){return e.$forceUpdate()}}})})),1)],1)],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"门诊号",prop:"doorNum"}},[r("el-input",{model:{value:e.addForm.doorNum,callback:function(t){e.$set(e.addForm,"doorNum",t)},expression:"addForm.doorNum"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"床位号",prop:"bedNum"}},[r("el-input",{model:{value:e.addForm.bedNum,callback:function(t){e.$set(e.addForm,"bedNum",t)},expression:"addForm.bedNum"}})],1)],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"患者姓名",prop:"patientName"}},[r("el-input",{model:{value:e.addForm.patientName,callback:function(t){e.$set(e.addForm,"patientName",t)},expression:"addForm.patientName"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"患者年龄",prop:"patientAge"}},[r("el-input",{model:{value:e.addForm.patientAge,callback:function(t){e.$set(e.addForm,"patientAge",t)},expression:"addForm.patientAge"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"患者性别",prop:"patientGender"}},[r("el-select",{attrs:{placeholder:"选择病人性别"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.addForm.patientGender,callback:function(t){e.$set(e.addForm,"patientGender",t)},expression:"addForm.patientGender"}},[r("el-option",{key:"男",attrs:{label:"男",value:"男"}}),r("el-option",{key:"女",attrs:{label:"女",value:"女"}})],1)],1)],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"联系方式",prop:"patientTellphone"}},[r("el-input",{model:{value:e.addForm.patientTellphone,callback:function(t){e.$set(e.addForm,"patientTellphone",t)},expression:"addForm.patientTellphone"}})],1)],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"采样时间",prop:"recvTime"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy年MM月dd日","value-format":"yyyy年MM月dd日"},on:{blur:function(t){return e.$forceUpdate()}},model:{value:e.addForm.recvTime,callback:function(t){e.$set(e.addForm,"recvTime",t)},expression:"addForm.recvTime"}})],1)],1),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"创建时间",prop:"createTime"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy年MM月dd日","value-format":"yyyy年MM月dd日"},on:{blur:function(t){return e.$forceUpdate()}},model:{value:e.addForm.createTime,callback:function(t){e.$set(e.addForm,"createTime",t)},expression:"addForm.createTime"}})],1)],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisable=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addSpecimen}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"编辑检测样本",visible:e.editDialogVisable},on:{"update:visible":function(t){e.editDialogVisable=t},close:e.editDialogClosed}},[r("el-form",{ref:"editFormRef",staticClass:"demo-editForm",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"样本条码",prop:"specimenCode"}},[r("el-input",{model:{value:e.editForm.specimenCode,callback:function(t){e.$set(e.editForm,"specimenCode",t)},expression:"editForm.specimenCode"}})],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"检测项目",prop:"testTypeId"}},[r("el-select",{attrs:{placeholder:"选择检测项目"},on:{change:e.editFormTestTypeChanged,"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.editForm.testTypeId,callback:function(t){e.$set(e.editForm,"testTypeId",t)},expression:"editForm.testTypeId"}},e._l(e.testTypeList,(function(e){return r("el-option",{key:e.dictId,attrs:{label:e.dictValue,value:e.dictId}})})),1)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"样本类型",prop:"specimenTypeId"}},[r("el-select",{attrs:{placeholder:"选择样本类型"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.editForm.specimenTypeId,callback:function(t){e.$set(e.editForm,"specimenTypeId",t)},expression:"editForm.specimenTypeId"}},e._l(e.specimenTypeList,(function(e){return r("el-option",{key:e.dictId,attrs:{label:e.dictValue,value:e.dictId}})})),1)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"样本状况",prop:"specimenSituationId"}},[r("el-select",{attrs:{placeholder:"选择样本状况"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.editForm.specimenSituationId,callback:function(t){e.$set(e.editForm,"specimenSituationId",t)},expression:"editForm.specimenSituationId"}},e._l(e.specimenSituationList,(function(e){return r("el-option",{key:e.dictId,attrs:{label:e.dictValue,value:e.dictId}})})),1)],1)],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"送检医院",prop:"hosId"}},[r("el-select",{attrs:{placeholder:"选择送检医院",filterable:"",remote:"","remote-method":e.getHospitalList},on:{change:function(t){return e.getDepartmentListByHosId(e.editForm.hosId)},"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.editForm.hosId,callback:function(t){e.$set(e.editForm,"hosId",t)},expression:"editForm.hosId"}},e._l(e.hospitalList,(function(e){return r("el-option",{key:e.hosId,attrs:{label:e.hosName,value:e.hosId}})})),1)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"送检科室",prop:"deptId"}},[r("el-select",{attrs:{placeholder:"选择送检科室",filterable:""},on:{change:function(t){return e.getDoctorListByDeptId(e.editForm.deptId)},"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.editForm.deptId,callback:function(t){e.$set(e.editForm,"deptId",t)},expression:"editForm.deptId"}},e._l(e.departmentList,(function(e){return r("el-option",{key:e.deptId,attrs:{label:e.deptName,value:e.deptId}})})),1)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"送检医生",prop:"docId"}},[r("el-select",{attrs:{placeholder:"选择送检医生"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.editForm.docId,callback:function(t){e.$set(e.editForm,"docId",t)},expression:"editForm.docId"}},e._l(e.doctorList,(function(e){return r("el-option",{key:e.docId,attrs:{label:e.docName,value:e.docId}})})),1)],1)],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"门诊号",prop:"doorNum"}},[r("el-input",{model:{value:e.editForm.doorNum,callback:function(t){e.$set(e.editForm,"doorNum",t)},expression:"editForm.doorNum"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"床位号",prop:"bedNum"}},[r("el-input",{model:{value:e.editForm.bedNum,callback:function(t){e.$set(e.editForm,"bedNum",t)},expression:"editForm.bedNum"}})],1)],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"患者姓名",prop:"patientName"}},[r("el-input",{model:{value:e.editForm.patientName,callback:function(t){e.$set(e.editForm,"patientName",t)},expression:"editForm.patientName"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"患者年龄",prop:"patientAge"}},[r("el-input",{model:{value:e.editForm.patientAge,callback:function(t){e.$set(e.editForm,"patientAge",t)},expression:"editForm.patientAge"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"患者性别",prop:"patientGender"}},[r("el-select",{attrs:{placeholder:"选择病人性别"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.editForm.patientGender,callback:function(t){e.$set(e.editForm,"patientGender",t)},expression:"editForm.patientGender"}},[r("el-option",{key:"男",attrs:{label:"男",value:"男"}}),r("el-option",{key:"女",attrs:{label:"女",value:"女"}})],1)],1)],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"联系方式",prop:"patientTellphone"}},[r("el-input",{model:{value:e.editForm.patientTellphone,callback:function(t){e.$set(e.editForm,"patientTellphone",t)},expression:"editForm.patientTellphone"}})],1)],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"采样时间",prop:"createTime"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy年MM月dd日","value-format":"yyyy年MM月dd日"},on:{blur:function(t){return e.$forceUpdate()}},model:{value:e.editForm.createTime,callback:function(t){e.$set(e.editForm,"createTime",t)},expression:"editForm.createTime"}})],1)],1),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"接收时间",prop:"recvTime"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy年MM月dd日","value-format":"yyyy年MM月dd日"},on:{blur:function(t){return e.$forceUpdate()}},model:{value:e.editForm.recvTime,callback:function(t){e.$set(e.editForm,"recvTime",t)},expression:"editForm.recvTime"}})],1)],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisable=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editSpecimen}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"生成报告",visible:e.addReportDialogVisable,width:"35%"},on:{"update:visible":function(t){e.addReportDialogVisable=t},close:e.addReportDialogClosed}},[r("el-form",{ref:"addReportFormRef",staticClass:"demo-addReportForm",attrs:{model:e.addReportForm,rules:e.addReportFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"报告结果",prop:"specimenResultId"}},[r("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"选择报告结果"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.addReportForm.specimenResultId,callback:function(t){e.$set(e.addReportForm,"specimenResultId",t)},expression:"addReportForm.specimenResultId"}},e._l(e.specimenResultList,(function(e){return r("el-option",{key:e.dictId,attrs:{label:e.dictValue,value:e.dictId}})})),1)],1),r("el-form-item",{attrs:{label:"参考值",prop:"referenceValueId"}},[r("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"选择参考值"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.addReportForm.referenceValueId,callback:function(t){e.$set(e.addReportForm,"referenceValueId",t)},expression:"addReportForm.referenceValueId"}},e._l(e.specimenResultList,(function(e){return r("el-option",{key:e.dictId,attrs:{label:e.dictValue,value:e.dictId}})})),1)],1),r("el-form-item",{attrs:{label:"报告者",prop:"reporterId"}},[r("el-select",{attrs:{placeholder:"选择报告者"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.addReportForm.reporterId,callback:function(t){e.$set(e.addReportForm,"reporterId",t)},expression:"addReportForm.reporterId"}},e._l(e.reporterList,(function(e){return r("el-option",{key:e.managerId,attrs:{label:e.managerName,value:e.managerId}})})),1)],1),r("el-form-item",{attrs:{label:"审核者",prop:"reviewerId"}},[r("el-select",{attrs:{placeholder:"选择审核者"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.addReportForm.reviewerId,callback:function(t){e.$set(e.addReportForm,"reviewerId",t)},expression:"addReportForm.reviewerId"}},e._l(e.reviewerList,(function(e){return r("el-option",{key:e.managerId,attrs:{label:e.managerName,value:e.managerId}})})),1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addReportDialogVisable=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addReport}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"编辑报告",visible:e.editReportDialogVisable,width:"35%"},on:{"update:visible":function(t){e.editReportDialogVisable=t},close:e.editReportDialogClosed}},[r("el-form",{ref:"editReportFormRef",attrs:{model:e.editReportForm,rules:e.editReportFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"报告结果",prop:"specimenResultId"}},[r("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"选择报告结果"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.editReportForm.specimenResultId,callback:function(t){e.$set(e.editReportForm,"specimenResultId",t)},expression:"editReportForm.specimenResultId"}},e._l(e.specimenResultList,(function(e){return r("el-option",{key:e.dictId,attrs:{label:e.dictValue,value:e.dictId}})})),1)],1),r("el-form-item",{attrs:{label:"参考值",prop:"referenceValueId"}},[r("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"选择参考值"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.editReportForm.referenceValueId,callback:function(t){e.$set(e.editReportForm,"referenceValueId",t)},expression:"editReportForm.referenceValueId"}},e._l(e.specimenResultList,(function(e){return r("el-option",{key:e.dictId,attrs:{label:e.dictValue,value:e.dictId}})})),1)],1),r("el-form-item",{attrs:{label:"报告者",prop:"reporterId"}},[r("el-select",{attrs:{placeholder:"选择报告者"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.editReportForm.reporterId,callback:function(t){e.$set(e.editReportForm,"reporterId",t)},expression:"editReportForm.reporterId"}},e._l(e.reporterList,(function(e){return r("el-option",{key:e.managerId,attrs:{label:e.managerName,value:e.managerId}})})),1)],1),r("el-form-item",{attrs:{label:"审核者",prop:"reviewerId"}},[r("el-select",{attrs:{placeholder:"选择审核者"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.editReportForm.reviewerId,callback:function(t){e.$set(e.editReportForm,"reviewerId",t)},expression:"editReportForm.reviewerId"}},e._l(e.reviewerList,(function(e){return r("el-option",{key:e.managerId,attrs:{label:e.managerName,value:e.managerId}})})),1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editReportDialogVisable=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editReport}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"批量生成阴性报告",visible:e.batchCreateNegativeReportDialogVisable,width:"35%"},on:{"update:visible":function(t){e.batchCreateNegativeReportDialogVisable=t},close:e.batchCreateNegativeReportDialogClosed}},[r("el-form",{ref:"batchCreateNegativeReportFormRef",attrs:{model:e.batchCreateNegativeReportForm,rules:e.batchCreateNegativeReportFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"报告者",prop:"reporterId"}},[r("el-select",{attrs:{placeholder:"选择报告者"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.batchCreateNegativeReportForm.reporterId,callback:function(t){e.$set(e.batchCreateNegativeReportForm,"reporterId",t)},expression:"batchCreateNegativeReportForm.reporterId"}},e._l(e.reporterList,(function(e){return r("el-option",{key:e.managerId,attrs:{label:e.managerName,value:e.managerId}})})),1)],1),r("el-form-item",{attrs:{label:"审核者",prop:"reviewerId"}},[r("el-select",{attrs:{placeholder:"选择审核者"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.batchCreateNegativeReportForm.reviewerId,callback:function(t){e.$set(e.batchCreateNegativeReportForm,"reviewerId",t)},expression:"batchCreateNegativeReportForm.reviewerId"}},e._l(e.reviewerList,(function(e){return r("el-option",{key:e.managerId,attrs:{label:e.managerName,value:e.managerId}})})),1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.batchCreateNegativeReportDialogVisable=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.batchCreateNegativeReport}},[e._v("确 定")])],1)],1)],1)},O=[],j=(r("c975"),r("d3b7"),r("ac1f"),r("3ca3"),r("5319"),r("ddb0"),r("2b3d"),{data:function(){return{pageResult:{total:0,rows:[]},queryInfo:{pageNum:1,pageSize:5,specimenCode:"",createTime:"",recvTime:"",reportTime:"",sortRule:"",specimenStatusId:void 0,hosId:"0"},addDialogVisable:!1,addForm:{specimenCode:"",hosId:"",deptId:"",docId:"",bedNum:"",doorNum:"",patientName:"",patientAge:"",patientTellphone:"",patientGender:"",specimenTypeId:"",specimenSituationId:"",specimenStatusId:0},addFormRules:{specimenCode:[{required:!0,message:"请输入样本条码",trigger:"blur"}],createTime:[{required:!0,message:"请选择采样日期",trigger:"blur"}],recvTime:[{required:!0,message:"请输入接收时间",trigger:"blur"}],testTypeId:[{required:!0,message:"请选择检测项目",trigger:"blur"}],specimenTypeId:[{required:!0,message:"请选择样本类型",trigger:"blur"}],hosId:[{required:!0,message:"请选择医院",trigger:"blur"}]},editDialogVisable:!1,editForm:{specimenCode:"",hosId:"",deptId:"",docId:"",bedNum:"",doorNum:"",patientName:"",patientAge:"",patientTellphone:"",patientGender:"",specimenTypeId:0,specimenSituationId:0,specimenStatusId:0},editFormRules:{specimenCode:[{required:!0,message:"请输入检测样本名",trigger:"blur"}],createTime:[{required:!0,message:"请选择采样日期",trigger:"blur"}],recvTime:[{required:!0,message:"请输入接收时间",trigger:"blur"}],testTypeId:[{required:!0,message:"请选择检测项目",trigger:"blur"}],specimenTypeId:[{required:!0,message:"请选择样本类型",trigger:"blur"}],hosId:[{required:!0,message:"请选择医院",trigger:"blur"}]},addReportDialogVisable:!1,addReportForm:{referenceValueId:"",reporterId:"",reviewerId:""},addReportFormRules:{},editReportDialogVisable:!1,editReportForm:{referenceValueId:"",reporterId:"",reviewerId:""},editReportFormRules:{},specimenResultList:[{dictId:0,dictName:"",dictValue:""}],testTypeList:[{dictId:0,dictName:"",dictValue:""}],reporterList:[{managerId:0,managerName:"",managerType:""}],reviewerList:[{managerId:0,managerName:"",managerType:""}],specimenTypeList:[{dictId:0,dictName:"",dictValue:""}],specimenSituationList:[{dictId:0,dictName:"",dictValue:""}],hospitalList:[],departmentList:[],doctorList:[],rightList:{},batchCreateNegativeReportBtnVisable:!1,batchCreateNegativeReportDialogVisable:!1,batchCreateNegativeReportForm:{reporterId:"",reviewerId:""},batchCreateNegativeReportFormRules:{reviewerId:[{required:!0,message:"请选择审查者",trigger:"blur"}],reporterId:[{required:!0,message:"请选择报告者",trigger:"blur"}]}}},created:function(){var e=this;this.getRight(),this.getSpecimenList(),this.listAllDictionary({dictName:"specimen_type"}).then((function(t){e.specimenTypeList=t})),this.listAllDictionary({dictName:"test_types"}).then((function(t){e.testTypeList=t})),this.getHospitalList(),this.getDepartmentListByHosId(0),this.addForm.createTime=this.getNowDate(),this.addForm.recvTime=this.getNowDate()},methods:{handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getSpecimenList()},handleCurrentChange:function(e){this.queryInfo.pageNum=e,this.getSpecimenList()},addDialogClosed:function(){this.addForm.specimenCode="",this.addForm.patientName="",this.addForm.patientAge="",this.addForm.patientTellphone="",this.addForm.doorNum="",this.addForm.bedNum=""},getNowDate:function(){var e=new Date,t=e.getFullYear(),r=e.getMonth()+1,a=e.getDate();return r<10&&(r="0"+r),a<10&&(a="0"+a),t+"年"+r+"月"+a+"日"},addReport:function(){var e=this;this.$http.post("report/save.do",this.addReportForm,{responseType:"arraybuffer"}).then(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,o,n,i,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new Blob([r.data],{type:"application/pdf;"}),o=document.createElement("a"),n=window.URL.createObjectURL(a),o.href=n,t.next=6,e.$http.post("specimen/getDetailsById.do?specimenId="+e.addReportForm.specimenId);case 6:return i=t.sent,s=i.data,l=s.specimenCode+"-"+s.patientName+"-"+s.testType.dictValue,o.download=decodeURIComponent(l),document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(n),e.getSpecimenList(),e.addReportDialogVisable=!1,t.abrupt("return",e.$message({message:"报告保存成功",type:"success"}));case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},editReport:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$http.post("report/update.do",e.editReportForm,{responseType:"arraybuffer"}).then(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,o,n,i,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new Blob([r.data],{type:"application/pdf;"}),o=document.createElement("a"),n=window.URL.createObjectURL(a),o.href=n,t.next=6,e.$http.post("specimen/getDetailsById.do?specimenId="+e.editReportForm.specimenId);case 6:return i=t.sent,s=i.data,l=s.specimenCode+"-"+s.patientName+"-"+s.testType.dictValue,o.download=decodeURIComponent(l),document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(n),e.getSpecimenList(),e.editReportDialogVisable=!1,t.abrupt("return",e.$message({message:"报告更新成功",type:"success"}));case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},showEditDialog:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!(void 0===(((t.rightList||{}).specimenManagement||{}).specimenAction||{})||0===e.specimenStatusId&&void 0===(((t.rightList||{}).specimenManagement||{}).specimenAction||{}).updateNoReportSpecimen||1===e.specimenStatusId&&void 0===(((t.rightList||{}).specimenManagement||{}).specimenAction||{}).updateReportedSpecimen)){r.next=2;break}return r.abrupt("return",t.$message.error("对不起，您没有编辑样本的权限"));case 2:t.listAllDictionary({dictName:"specimen_situation"}).then((function(e){t.specimenSituationList=e})),t.listAllDictionary({dictName:"test_types"}).then((function(e){t.testTypeList=e})),t.getHospitalList(),t.listAllDictionary({dictName:e.testTypeId+"_specimen_type"}).then((function(r){t.specimenTypeList=r,t.editForm=JSON.parse(JSON.stringify(e)),console.log(t.editForm.hosId),t.getDepartmentListByHosId(t.editForm.hosId),t.getDoctorListByDeptId(t.editForm.deptId),t.editDialogVisable=!0}));case 6:case"end":return r.stop()}}),r)})))()},editDialogClosed:function(){this.$refs.editFormRef.resetFields()},getSpecimenList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return null!==e.queryInfo.createTimeRange&&""!==e.queryInfo.createTimeRange&&Array.isArray(e.queryInfo.createTimeRange)&&(e.queryInfo.createTime=e.queryInfo.createTimeRange[0]+"--"+e.queryInfo.createTimeRange[1]),null!==e.queryInfo.recvTimeRange&&""!==e.queryInfo.recvTimeRange&&Array.isArray(e.queryInfo.recvTimeRange)&&(e.queryInfo.recvTime=e.queryInfo.recvTimeRange[0]+"--"+e.queryInfo.recvTimeRange[1]),null!==e.queryInfo.reportTimeRange&&""!==e.queryInfo.reportTimeRange&&Array.isArray(e.queryInfo.reportTimeRange)&&(e.queryInfo.reportTime=e.queryInfo.reportTimeRange[0]+"--"+e.queryInfo.reportTimeRange[1]),t.next=5,e.$http.post("specimen/list.do?pageNum="+e.queryInfo.pageNum+"&pageSize="+e.queryInfo.pageSize+"&sortRule="+e.queryInfo.sortRule,{specimenCode:e.queryInfo.specimenCode,patientName:e.queryInfo.patientName,testTypeId:e.queryInfo.testTypeId,specimenTypeId:e.queryInfo.specimenTypeId,specimenStatusId:e.queryInfo.specimenStatusId,hosId:e.queryInfo.hosId,deptId:e.queryInfo.deptId,createTime:e.queryInfo.createTime,recvTime:e.queryInfo.recvTime,report:{createTime:e.queryInfo.reportTime}});case 5:r=t.sent,a=r.data,e.pageResult=a,e.batchCreateNegativeReportBtnVisable="0"===e.queryInfo.specimenStatusId&&"0"!==e.queryInfo.hosId;case 9:case"end":return t.stop()}}),t)})))()},editSpecimen:function(){var e=this;this.$refs.editFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=10;break}return t.next=3,e.$http.post("specimen/update.do",e.editForm);case 3:if(a=t.sent,o=a.data,e.editDialogVisable=!1,!o.success){t.next=9;break}return e.getSpecimenList(),t.abrupt("return",e.$message({message:o.message,type:"success"}));case 9:return t.abrupt("return",e.$message.error(o.message));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},deleteSpecimen:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!(void 0===(((t.rightList||{}).specimenManagement||{}).specimenAction||{})||0===e.specimenStatusId&&void 0===(((t.rightList||{}).specimenManagement||{}).specimenAction||{}).deleteReportedSpecimen||1===e.specimenStatusId&&void 0===(((t.rightList||{}).specimenManagement||{}).specimenAction||{}).deleteNoReportSpecimen)){r.next=2;break}return r.abrupt("return",t.$message.error("对不起，您没有删除样本的权限"));case 2:t.$confirm("此操作将永久删除该检测样本, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("specimen/delete.do?specimenId="+e.specimenId);case 2:if(a=r.sent,o=a.data,t.getSpecimenList(),!o.success){r.next=7;break}return r.abrupt("return",t.$message({type:"success",message:o.message}));case 7:return r.abrupt("return",t.$message.error(o.message));case 8:case"end":return r.stop()}}),r)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}));case 3:case"end":return r.stop()}}),r)})))()},getManagerList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a,o,n,i,s,l,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("dictionary/list.do",{dictName:"manager_type_reporter"});case 2:return r=t.sent,a=r.data,t.next=6,e.$http.post("manager/listAll.do",{managerType:a[0].dictId});case 6:return o=t.sent,n=o.data,e.reporterList=n,t.next=11,e.$http.post("dictionary/list.do",{dictName:"manager_type_reviewer"});case 11:return i=t.sent,s=i.data,t.next=15,e.$http.post("manager/listAll.do",{managerType:s[0].dictId});case 15:l=t.sent,c=l.data,e.reviewerList=c;case 18:case"end":return t.stop()}}),t)})))()},showAddReportDialog:function(e,t){var r=this;return Object(g["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(console.log(r.rightList),void 0!==r.rightList.specimenManagement&&void 0!==r.rightList.specimenManagement.reportAction&&void 0!==r.rightList.specimenManagement.reportAction.saveReport){a.next=3;break}return a.abrupt("return",r.$message.error("对不起，您没有生成报告的权限"));case 3:r.addReportForm.specimenId=e,r.listAllDictionary({dictName:t+"_result"}).then((function(e){r.specimenResultList=e,r.addReportForm.specimenResultId=e[0].dictId,r.addReportForm.referenceValueId=e[0].dictId})),r.getManagerList().then((function(e){r.addReportForm.reporterId=r.reporterList[0].managerId,r.addReportForm.reviewerId=r.reviewerList[0].managerId,r.addReportDialogVisable=!0}));case 6:case"end":return a.stop()}}),a)})))()},showEditReportDialog:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=JSON.parse(JSON.stringify(e)),void 0!==t.rightList.specimenManagement&&void 0!==t.rightList.specimenManagement.reportAction&&void 0!==t.rightList.specimenManagement.reportAction.updateReport){r.next=3;break}return r.abrupt("return",t.$message.error("对不起，您没有编辑报告的权限"));case 3:t.editReportForm.reportId=a.report.reportId,t.editReportForm.specimenId=a.specimenId,t.listAllDictionary({dictName:a.testTypeId+"_result"}).then((function(e){t.specimenResultList=e,t.editReportForm.specimenResultId=a.report.specimenResultId,t.editReportForm.referenceValueId=a.report.referenceValueId})),t.getManagerList().then((function(e){t.editReportForm.reporterId=a.report.reporterId,t.editReportForm.reviewerId=a.report.reviewerId,t.editReportDialogVisable=!0}));case 7:case"end":return r.stop()}}),r)})))()},addReportDialogClosed:function(){this.$refs.addReportFormRef.resetFields()},editReportDialogClosed:function(){this.$refs.editReportFormRef.resetFields()},batchCreateNegativeReportDialogClosed:function(){this.$refs.batchCreateNegativeReportFormRef.resetFields()},diagnosticItemSelectChanged:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("dictionary/list.do",{dictName:e+"_result"});case 2:a=r.sent,o=a.data,t.specimenResultList=o,t.addReportForm.specimenResultId=o[0].dictId,t.addReportForm.referenceValueId=o[0].dictId;case 7:case"end":return r.stop()}}),r)})))()},listAllDictionary:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("dictionary/list.do",e);case 2:return a=r.sent,o=a.data,r.abrupt("return",o);case 5:case"end":return r.stop()}}),r)})))()},getHospitalList:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("hospital/listAll.do",{hosName:e});case 2:a=r.sent,o=a.data,t.hospitalList=o;case 5:case"end":return r.stop()}}),r)})))()},showAddDialog:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.listAllDictionary({dictName:"test_types"}).then((function(t){return e.testTypeList=t,e.listAllDictionary({dictName:t[0].dictId+"_specimen_type"})})).then((function(t){e.specimenTypeList=t})),e.listAllDictionary({dictName:"specimen_situation"}).then((function(t){e.specimenSituationList=t})).then((function(t){e.addDialogVisable=!0,e.$nextTick((function(){this.$refs.specimenCodeRef.focus()}))}));case 2:case"end":return t.stop()}}),t)})))()},addSpecimen:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=10;break}return t.next=3,e.$http.post("specimen/save.do",e.addForm);case 3:if(a=t.sent,o=a.data,e.addDialogVisable=!1,!o.success){t.next=9;break}return e.getSpecimenList(),t.abrupt("return",e.$message({message:o.message,type:"success"}));case 9:return t.abrupt("return",e.$message.error(o.message));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getDepartmentListByHosId:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(e),r.next=3,t.$http.post("department/listAll.do?",{hosId:e});case 3:a=r.sent,o=a.data,t.departmentList=o;case 6:case"end":return r.stop()}}),r)})))()},getDoctorListByDeptId:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("doctor/listAll.do",{docName:"",deptId:e});case 2:a=r.sent,o=a.data,t.doctorList=o;case 5:case"end":return r.stop()}}),r)})))()},addFormTestTypeChanged:function(){var e=this;this.listAllDictionary({dictName:this.addForm.testTypeId+"_specimen_type"}).then((function(t){e.specimenTypeList=t,e.addForm.specimenTypeId=t[0].dictId}))},editFormTestTypeChanged:function(){var e=this;this.listAllDictionary({dictName:this.editForm.testTypeId+"_specimen_type"}).then((function(t){e.specimenTypeList=t,e.editForm.specimenTypeId=t[0].dictId}))},batchImportSuccess:function(e,t){return e.success?(this.getSpecimenList(),this.$message({message:e.message,type:"success"})):this.$message.error(e.message)},sortByNumber:function(e,t){return e=parseInt(e),t=parseInt(t),e>t?1:t>e?-1:0},sortByDoorNum:function(e,t){return this.sortByNumber(e.doorNum,t.doorNum)},getRight:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=window.sessionStorage.getItem("loginName"),t.next=3,e.$http.post("right/listByLoginName.do?loginName="+r);case 3:a=t.sent,o=a.data,e.rightList=o;case 6:case"end":return t.stop()}}),t)})))()},showBatchCreateNegativeReportDialog:function(){var e=this;this.$confirm("将当前查询到的"+this.pageResult.total+"条样本全部导出为阴性, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getManagerList().then((function(t){e.batchCreateNegativeReportForm.reporterId=e.reporterList[0].managerId,e.batchCreateNegativeReportForm.reviewerId=e.reviewerList[0].managerId,e.batchCreateNegativeReportDialogVisable=!0}));case 1:case"end":return t.stop()}}),t)})))).catch((function(){e.$message({type:"info",message:"已取消该操作"})}))},batchCreateNegativeReport:function(){var e=this;this.batchCreateNegativeReportDialogVisable=!1,this.$http.post("report/batchSaveAsNegative.do?reporterId="+this.batchCreateNegativeReportForm.reporterId+"&reviewerId="+this.batchCreateNegativeReportForm.reviewerId,this.queryInfo,{responseType:"blob"}).then(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,o,n,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(r),a=r.headers["content-disposition"],o=a.substring(a.indexOf("filename=")+9,a.length),o=decodeURI(escape(o)),o=o.replace('"',""),n=r.data,i=window.URL.createObjectURL(new Blob([n])),s=document.createElement("a"),s.style.display="none",s.href=i,s.setAttribute("download",o),document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(s.href),document.body.removeChild(s),e.getSpecimenList(),e.addReportDialogVisable=!1,t.abrupt("return",e.$message({message:"阴性报告批量成功",type:"success"}));case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},directives:{focus:{inserted:function(e,t){var r="el-input",a="input",o=t.value||!0;o="boolean"===typeof o?{cls:r,tag:a,foc:o}:{cls:o.cls||r,tag:o.tag||a,foc:o.foc||!1},e.classList.contains(o.cls)&&o.foc&&e.getElementsByTagName(o.tag)[0].focus()}}}}),U=j,z=(r("347b"),Object(l["a"])(U,M,O,!1,null,"75967154",null)),B=z.exports,H=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("检测样本")]),r("el-breadcrumb-item",[e._v("报告列表")])],1),r("el-card",{staticClass:"box-card"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:4}},[r("el-select",{attrs:{placeholder:"选择检测项目"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.queryInfo.testTypeId,callback:function(t){e.$set(e.queryInfo,"testTypeId",t)},expression:"queryInfo.testTypeId"}},e._l(e.testTypeList,(function(e){return r("el-option",{key:e.dictId,attrs:{label:e.dictValue,value:e.dictId}})})),1)],1)],1),r("br"),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:7}},[r("div",{staticClass:"block"},[r("center",{staticClass:"date-title"},[e._v("接收日期")]),r("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"截至日期","unlink-panels":"",format:"yyyy年MM月dd日","value-format":"yyyy年MM月dd日"},on:{blur:function(t){return e.$forceUpdate()}},model:{value:e.queryInfo.recvTimeRange,callback:function(t){e.$set(e.queryInfo,"recvTimeRange",t)},expression:"queryInfo.recvTimeRange"}})],1)]),r("el-col",{attrs:{span:7}},[r("div",{staticClass:"block"},[r("center",{staticClass:"date-title"},[e._v("报告生成日期")]),r("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"截至日期","unlink-panels":"",format:"yyyy年MM月dd日","value-format":"yyyy年MM月dd日",disabled:1!=e.queryInfo.specimenStatusId},on:{blur:function(t){return e.$forceUpdate()}},model:{value:e.queryInfo.reportTimeRange,callback:function(t){e.$set(e.queryInfo,"reportTimeRange",t)},expression:"queryInfo.reportTimeRange"}})],1)])],1),r("br"),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:4}},[r("div",[r("el-select",{attrs:{placeholder:"选择送检医院",filterable:"",remote:"","remote-method":e.getHospitalList},on:{change:function(t){return e.getDepartmentListByHosId(e.queryInfo.hosId)},"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.queryInfo.hosId,callback:function(t){e.$set(e.queryInfo,"hosId",t)},expression:"queryInfo.hosId"}},[r("el-option",{key:"",attrs:{label:"全部",value:""}}),e._l(e.hospitalList,(function(e){return r("el-option",{key:e.hosId,attrs:{label:e.hosName,value:e.hosId}})}))],2)],1)]),r("el-col",{attrs:{span:4}},[r("div",[r("el-select",{attrs:{placeholder:"选择送检科室"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.queryInfo.deptId,callback:function(t){e.$set(e.queryInfo,"deptId",t)},expression:"queryInfo.deptId"}},[r("el-option",{key:"",attrs:{label:"全部",value:""}}),e._l(e.departmentList,(function(e){return r("el-option",{key:e.deptId,attrs:{label:e.deptName,value:e.deptId}})}))],2)],1)]),r("el-col",{attrs:{span:4}},[r("div",[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"病人名字"},on:{change:e.getSpecimenList},model:{value:e.queryInfo.patientName,callback:function(t){e.$set(e.queryInfo,"patientName",t)},expression:"queryInfo.patientName"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getSpecimenList},slot:"append"})],1)],1)]),r("el-col",{attrs:{span:3}},[r("div",[r("el-button",{attrs:{type:"primary"},on:{click:e.showAddDialog}},[e._v("添加检测样本")])],1)]),r("el-col",{attrs:{span:5}},[r("div",[r("el-upload",{staticClass:"upload-demo",attrs:{name:"uploadFile",action:e.$http.defaults.baseURL+"specimen/uploadFromFile.do","on-success":e.batchImportSuccess}},[r("el-button",{attrs:{type:"success"}},[e._v("从Excel导入")]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传指定格式的csv后缀的文件")])],1)],1)])],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.pageResult.rows,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-table",{staticStyle:{width:"100%"},attrs:{data:[t.row],border:"",stripe:""}},[r("el-table-column",{attrs:{prop:"specimenSituation.dictValue",label:"样本情况"}}),r("el-table-column",{attrs:{prop:"patientAge",label:"患者年龄"}}),r("el-table-column",{attrs:{prop:"patientGender",label:"患者性别"}}),r("el-table-column",{attrs:{prop:"patientTellphone",label:"联系电话"}}),r("el-table-column",{attrs:{prop:"bedNum",label:"床位"}}),1==t.row.specimenStatusId?r("el-table-column",{attrs:{prop:"report.specimenResult.dictValue",label:"检测结果"}}):e._e(),1==t.row.specimenStatusId?r("el-table-column",{attrs:{prop:"report.referenceValue.dictValue",label:"参考值"}}):e._e(),1==t.row.specimenStatusId?r("el-table-column",{attrs:{prop:"report.reporter.managerName",label:"报告者"}}):e._e(),1==t.row.specimenStatusId?r("el-table-column",{attrs:{prop:"report.reviewer.managerName",label:"审核者"}}):e._e()],1)]}}])}),r("el-table-column",{attrs:{type:"index",label:"#",width:"43"}}),r("el-table-column",{attrs:{prop:"specimenCode",label:"样本码"}}),r("el-table-column",{attrs:{prop:"specimenType.dictValue",label:"样本类型"}}),r("el-table-column",{attrs:{prop:"testType.dictValue",label:"检测项目"}}),r("el-table-column",{attrs:{prop:"patientName",label:"患者姓名"}}),r("el-table-column",{attrs:{prop:"patientAge",label:"年龄"}}),r("el-table-column",{attrs:{prop:"patientGender",label:"性别",width:"43"}}),r("el-table-column",{attrs:{prop:"specimenStatusId",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.specimenStatusId?r("span",[e._v("已生成报告")]):e._e(),0==t.row.specimenStatusId?r("span",[e._v("未生成报告")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"hospital.hosName",label:"医院"}}),r("el-table-column",{attrs:{prop:"department.deptName",label:"科室"}}),r("el-table-column",{attrs:{prop:"doctor.docName",label:"医生"}}),r("el-table-column",{attrs:{prop:"doorNum",sortable:"",label:"门诊号"}}),r("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),r("el-table-column",{attrs:{prop:"recvTime",label:"接收时间"}}),r("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{attrs:{effect:"dark",content:0==t.row.specimenStatusId?"生成报告":"编辑报告",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"success",icon:"el-icon-document-checked",size:"mini"},on:{click:function(r){0==t.row.specimenStatusId?e.showAddReportDialog(t.row.specimenId,t.row.testTypeId):e.showEditReportDialog(t.row.report.reportId,t.row.specimenId,t.row.testTypeId)}}})],1),r("el-tooltip",{attrs:{effect:"dark",content:"编辑标本",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.showEditDialog(t.row.specimenId)}}})],1),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.deleteSpecimen(t.row.specimenId)}}})]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-sizes":[5,10,15,20],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageResult.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:"添加检测样本",visible:e.addDialogVisable},on:{"update:visible":function(t){e.addDialogVisable=t},close:e.addDialogClosed}},[r("el-form",{ref:"addFormRef",staticClass:"demo-addForm",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"样本条码",prop:"specimenCode"}},[r("el-input",{ref:"specimenCodeRef",model:{value:e.addForm.specimenCode,callback:function(t){e.$set(e.addForm,"specimenCode",t)},expression:"addForm.specimenCode"}})],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"检测项目",prop:"testTypeId"}},[r("el-select",{attrs:{placeholder:"选择检测项目"},on:{"visible-change":function(t){return e.$forceUpdate()},change:function(t){return e.addFormTestTypeChanged()}},model:{value:e.addForm.testTypeId,callback:function(t){e.$set(e.addForm,"testTypeId",t)},expression:"addForm.testTypeId"}},e._l(e.testTypeList,(function(e){return r("el-option",{key:e.dictId,attrs:{label:e.dictValue,value:e.dictId}})})),1)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"样本类型",prop:"specimenTypeId"}},[r("el-select",{attrs:{placeholder:"选择样本类型"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.addForm.specimenTypeId,callback:function(t){e.$set(e.addForm,"specimenTypeId",t)},expression:"addForm.specimenTypeId"}},e._l(e.specimenTypeList,(function(e){return r("el-option",{key:e.dictId,attrs:{label:e.dictValue,value:e.dictId}})})),1)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"样本状况",prop:"specimenSituationId"}},[r("el-select",{attrs:{placeholder:"选择样本状况"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.addForm.specimenSituationId,callback:function(t){e.$set(e.addForm,"specimenSituationId",t)},expression:"addForm.specimenSituationId"}},e._l(e.specimenSituationList,(function(e){return r("el-option",{key:e.dictId,attrs:{label:e.dictValue,value:e.dictId}})})),1)],1)],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"送检医院",prop:"hosId"}},[r("el-select",{attrs:{placeholder:"选择送检医院",filterable:"",remote:"","remote-method":e.getHospitalList},on:{change:function(t){return e.getDepartmentListByHosId(e.addForm.hosId)},"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.addForm.hosId,callback:function(t){e.$set(e.addForm,"hosId",t)},expression:"addForm.hosId"}},e._l(e.hospitalList,(function(t){return r("el-option",{key:t.hosId,attrs:{label:t.hosName,value:t.hosId},on:{"visible-change":function(t){return e.$forceUpdate()}}})})),1)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"送检科室",prop:"deptId"}},[r("el-select",{attrs:{placeholder:"选择送检科室"},on:{change:function(t){return e.getDoctorListByDeptId(e.addForm.deptId)},"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.addForm.deptId,callback:function(t){e.$set(e.addForm,"deptId",t)},expression:"addForm.deptId"}},e._l(e.departmentList,(function(e){return r("el-option",{key:e.deptId,attrs:{label:e.deptName,value:e.deptId}})})),1)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"送检医生",prop:"docId"}},[r("el-select",{attrs:{placeholder:"选择送检医生"},model:{value:e.addForm.docId,callback:function(t){e.$set(e.addForm,"docId",t)},expression:"addForm.docId"}},e._l(e.doctorList,(function(t){return r("el-option",{key:t.docId,attrs:{label:t.docName,value:t.docId},on:{"visible-change":function(t){return e.$forceUpdate()}}})})),1)],1)],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"门诊号",prop:"doorNum"}},[r("el-input",{model:{value:e.addForm.doorNum,callback:function(t){e.$set(e.addForm,"doorNum",t)},expression:"addForm.doorNum"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"床位号",prop:"bedNum"}},[r("el-input",{model:{value:e.addForm.bedNum,callback:function(t){e.$set(e.addForm,"bedNum",t)},expression:"addForm.bedNum"}})],1)],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"患者姓名",prop:"patientName"}},[r("el-input",{model:{value:e.addForm.patientName,callback:function(t){e.$set(e.addForm,"patientName",t)},expression:"addForm.patientName"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"患者年龄",prop:"patientAge"}},[r("el-input",{model:{value:e.addForm.patientAge,callback:function(t){e.$set(e.addForm,"patientAge",t)},expression:"addForm.patientAge"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"患者性别",prop:"patientGender"}},[r("el-select",{attrs:{placeholder:"选择病人性别"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.addForm.patientGender,callback:function(t){e.$set(e.addForm,"patientGender",t)},expression:"addForm.patientGender"}},[r("el-option",{key:"男",attrs:{label:"男",value:"男"}}),r("el-option",{key:"女",attrs:{label:"女",value:"女"}})],1)],1)],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"联系方式",prop:"patientTellphone"}},[r("el-input",{model:{value:e.addForm.patientTellphone,callback:function(t){e.$set(e.addForm,"patientTellphone",t)},expression:"addForm.patientTellphone"}})],1)],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"采样时间",prop:"recvTime"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy年MM月dd日","value-format":"yyyy年MM月dd日"},on:{blur:function(t){return e.$forceUpdate()}},model:{value:e.addForm.recvTime,callback:function(t){e.$set(e.addForm,"recvTime",t)},expression:"addForm.recvTime"}})],1)],1),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"创建时间",prop:"createTime"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy年MM月dd日","value-format":"yyyy年MM月dd日"},on:{blur:function(t){return e.$forceUpdate()}},model:{value:e.addForm.createTime,callback:function(t){e.$set(e.addForm,"createTime",t)},expression:"addForm.createTime"}})],1)],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisable=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addSpecimen}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"编辑检测样本",visible:e.editDialogVisable},on:{"update:visible":function(t){e.editDialogVisable=t},close:e.editDialogClosed}},[r("el-form",{ref:"editFormRef",staticClass:"demo-editForm",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"样本条码",prop:"specimenCode"}},[r("el-input",{model:{value:e.editForm.specimenCode,callback:function(t){e.$set(e.editForm,"specimenCode",t)},expression:"editForm.specimenCode"}})],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"检测项目",prop:"testTypeId"}},[r("el-select",{attrs:{placeholder:"选择检测项目"},on:{change:e.editFormTestTypeChanged,"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.editForm.testTypeId,callback:function(t){e.$set(e.editForm,"testTypeId",t)},expression:"editForm.testTypeId"}},e._l(e.testTypeList,(function(e){return r("el-option",{key:e.dictId,attrs:{label:e.dictValue,value:e.dictId}})})),1)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"样本类型",prop:"specimenTypeId"}},[r("el-select",{attrs:{placeholder:"选择样本类型"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.editForm.specimenTypeId,callback:function(t){e.$set(e.editForm,"specimenTypeId",t)},expression:"editForm.specimenTypeId"}},e._l(e.specimenTypeList,(function(e){return r("el-option",{key:e.dictId,attrs:{label:e.dictValue,value:e.dictId}})})),1)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"样本状况",prop:"specimenSituationId"}},[r("el-select",{attrs:{placeholder:"选择样本状况"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.editForm.specimenSituationId,callback:function(t){e.$set(e.editForm,"specimenSituationId",t)},expression:"editForm.specimenSituationId"}},e._l(e.specimenSituationList,(function(e){return r("el-option",{key:e.dictId,attrs:{label:e.dictValue,value:e.dictId}})})),1)],1)],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"送检医院",prop:"hosId"}},[r("el-select",{attrs:{placeholder:"选择送检医院",filterable:"",remote:"","remote-method":e.getHospitalList},on:{change:function(t){return e.getDepartmentListByHosId(e.editForm.hosId)},"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.editForm.hosId,callback:function(t){e.$set(e.editForm,"hosId",t)},expression:"editForm.hosId"}},e._l(e.hospitalList,(function(e){return r("el-option",{key:e.hosId,attrs:{label:e.hosName,value:e.hosId}})})),1)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"送检科室",prop:"deptId"}},[r("el-select",{attrs:{placeholder:"选择送检科室"},on:{change:function(t){return e.getDoctorListByDeptId(e.editForm.deptId)},"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.editForm.deptId,callback:function(t){e.$set(e.editForm,"deptId",t)},expression:"editForm.deptId"}},e._l(e.departmentList,(function(e){return r("el-option",{key:e.deptId,attrs:{label:e.deptName,value:e.deptId}})})),1)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"送检医生",prop:"docId"}},[r("el-select",{attrs:{placeholder:"选择送检医生"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.editForm.docId,callback:function(t){e.$set(e.editForm,"docId",t)},expression:"editForm.docId"}},e._l(e.doctorList,(function(e){return r("el-option",{key:e.docId,attrs:{label:e.docName,value:e.docId}})})),1)],1)],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"门诊号",prop:"doorNum"}},[r("el-input",{model:{value:e.editForm.doorNum,callback:function(t){e.$set(e.editForm,"doorNum",t)},expression:"editForm.doorNum"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"床位号",prop:"bedNum"}},[r("el-input",{model:{value:e.editForm.bedNum,callback:function(t){e.$set(e.editForm,"bedNum",t)},expression:"editForm.bedNum"}})],1)],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"患者姓名",prop:"patientName"}},[r("el-input",{model:{value:e.editForm.patientName,callback:function(t){e.$set(e.editForm,"patientName",t)},expression:"editForm.patientName"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"患者年龄",prop:"patientAge"}},[r("el-input",{model:{value:e.editForm.patientAge,callback:function(t){e.$set(e.editForm,"patientAge",t)},expression:"editForm.patientAge"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"患者性别",prop:"patientGender"}},[r("el-select",{attrs:{placeholder:"选择病人性别"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.editForm.patientGender,callback:function(t){e.$set(e.editForm,"patientGender",t)},expression:"editForm.patientGender"}},[r("el-option",{key:"男",attrs:{label:"男",value:"男"}}),r("el-option",{key:"女",attrs:{label:"女",value:"女"}})],1)],1)],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"联系方式",prop:"patientTellphone"}},[r("el-input",{model:{value:e.editForm.patientTellphone,callback:function(t){e.$set(e.editForm,"patientTellphone",t)},expression:"editForm.patientTellphone"}})],1)],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"采样时间",prop:"createTime"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy年MM月dd日","value-format":"yyyy年MM月dd日"},on:{blur:function(t){return e.$forceUpdate()}},model:{value:e.editForm.createTime,callback:function(t){e.$set(e.editForm,"createTime",t)},expression:"editForm.createTime"}})],1)],1),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"接收时间",prop:"recvTime"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy年MM月dd日","value-format":"yyyy年MM月dd日"},on:{blur:function(t){return e.$forceUpdate()}},model:{value:e.editForm.recvTime,callback:function(t){e.$set(e.editForm,"recvTime",t)},expression:"editForm.recvTime"}})],1)],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisable=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editSpecimen}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"生成报告",visible:e.addReportDialogVisable,width:"35%"},on:{"update:visible":function(t){e.addReportDialogVisable=t},close:e.addReportDialogClosed}},[r("el-form",{ref:"addReportFormRef",staticClass:"demo-addReportForm",attrs:{model:e.addReportForm,rules:e.addReportFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"报告结果",prop:"specimenResultId"}},[r("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"选择报告结果"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.addReportForm.specimenResultId,callback:function(t){e.$set(e.addReportForm,"specimenResultId",t)},expression:"addReportForm.specimenResultId"}},e._l(e.specimenResultList,(function(e){return r("el-option",{key:e.dictId,attrs:{label:e.dictValue,value:e.dictId}})})),1)],1),r("el-form-item",{attrs:{label:"参考值",prop:"referenceValueId"}},[r("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"选择参考值"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.addReportForm.referenceValueId,callback:function(t){e.$set(e.addReportForm,"referenceValueId",t)},expression:"addReportForm.referenceValueId"}},e._l(e.specimenResultList,(function(e){return r("el-option",{key:e.dictId,attrs:{label:e.dictValue,value:e.dictId}})})),1)],1),r("el-form-item",{attrs:{label:"报告者",prop:"reporterId"}},[r("el-select",{attrs:{placeholder:"选择报告者"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.addReportForm.reporterId,callback:function(t){e.$set(e.addReportForm,"reporterId",t)},expression:"addReportForm.reporterId"}},e._l(e.reporterList,(function(e){return r("el-option",{key:e.managerId,attrs:{label:e.managerName,value:e.managerId}})})),1)],1),r("el-form-item",{attrs:{label:"审核者",prop:"reviewerId"}},[r("el-select",{attrs:{placeholder:"选择审核者"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.addReportForm.reviewerId,callback:function(t){e.$set(e.addReportForm,"reviewerId",t)},expression:"addReportForm.reviewerId"}},e._l(e.reviewerList,(function(e){return r("el-option",{key:e.managerId,attrs:{label:e.managerName,value:e.managerId}})})),1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addReportDialogVisable=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addReport}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"编辑报告",visible:e.editReportDialogVisable,width:"35%"},on:{"update:visible":function(t){e.editReportDialogVisable=t},close:e.editReportDialogClosed}},[r("el-form",{ref:"editReportFormRef",staticClass:"demo-editReportForm",attrs:{model:e.editReportForm,rules:e.editReportFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"报告结果",prop:"specimenResultId"}},[r("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"选择报告结果"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.editReportForm.specimenResultId,callback:function(t){e.$set(e.editReportForm,"specimenResultId",t)},expression:"editReportForm.specimenResultId"}},e._l(e.specimenResultList,(function(e){return r("el-option",{key:e.dictId,attrs:{label:e.dictValue,value:e.dictId}})})),1)],1),r("el-form-item",{attrs:{label:"参考值",prop:"referenceValueId"}},[r("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"选择参考值"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.editReportForm.referenceValueId,callback:function(t){e.$set(e.editReportForm,"referenceValueId",t)},expression:"editReportForm.referenceValueId"}},e._l(e.specimenResultList,(function(e){return r("el-option",{key:e.dictId,attrs:{label:e.dictValue,value:e.dictId}})})),1)],1),r("el-form-item",{attrs:{label:"报告者",prop:"reporterId"}},[r("el-select",{attrs:{placeholder:"选择报告者"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.editReportForm.reporterId,callback:function(t){e.$set(e.editReportForm,"reporterId",t)},expression:"editReportForm.reporterId"}},e._l(e.reporterList,(function(e){return r("el-option",{key:e.managerId,attrs:{label:e.managerName,value:e.managerId}})})),1)],1),r("el-form-item",{attrs:{label:"审核者",prop:"reviewerId"}},[r("el-select",{attrs:{placeholder:"选择审核者"},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.editReportForm.reviewerId,callback:function(t){e.$set(e.editReportForm,"reviewerId",t)},expression:"editReportForm.reviewerId"}},e._l(e.reviewerList,(function(e){return r("el-option",{key:e.managerId,attrs:{label:e.managerName,value:e.managerId}})})),1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editReportDialogVisable=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editReport}},[e._v("确 定")])],1)],1)],1)},E=[],P={data:function(){return{pageResult:{total:0,rows:[]},queryInfo:{pageNum:1,pageSize:5,specimenCode:"",createTime:"",recvTime:"",reportTime:""},addDialogVisable:!1,addForm:{specimenCode:"",hosId:"",deptId:"",docId:"",bedNum:"",doorNum:"",patientName:"",patientAge:"",patientTellphone:"",patientGender:"",specimenTypeId:"",specimenSituationId:"",specimenStatusId:0},addFormRules:{specimenCode:[{required:!0,message:"请输入样本条码",trigger:"blur"}],createTime:[{required:!0,message:"请选择采样日期",trigger:"blur"}],recvTime:[{required:!0,message:"请输入接收时间",trigger:"blur"}]},editDialogVisable:!1,editForm:{specimenCode:"",hosId:"",deptId:"",docId:"",bedNum:"",doorNum:"",patientName:"",patientAge:"",patientTellphone:"",patientGender:"",specimenTypeId:"",specimenSituationId:"",specimenStatusId:0},editFormRules:{specimenCode:[{required:!0,message:"请输入检测样本名",trigger:"blur"}],createTime:[{required:!0,message:"请选择采样日期",trigger:"blur"}],recvTime:[{required:!0,message:"请输入接收时间",trigger:"blur"}]},addReportDialogVisable:!1,addReportForm:{referenceValueId:"",reporterId:"",reviewerId:""},addReportFormRules:{},editReportDialogVisable:!1,editReportForm:{referenceValueId:"",reporterId:"",reviewerId:""},editReportFormRules:{},specimenResultList:[{dictId:0,dictName:"",dictValue:""}],testTypeList:[{dictId:0,dictName:"",dictValue:""}],reporterList:[{managerId:0,managerName:"",managerType:""}],reviewerList:[{managerId:0,managerName:"",managerType:""}],specimenTypeList:[{dictId:0,dictName:"",dictValue:""}],specimenSituationList:[{dictId:0,dictName:"",dictValue:""}],hospitalList:[],departmentList:[],doctorList:[]}},created:function(){var e=this;this.getSpecimenList(),this.listAllDictionary({dictName:"specimen_type"}).then((function(t){e.specimenTypeList=t})),this.listAllDictionary({dictName:"test_types"}).then((function(t){e.testTypeList=t})),this.getHospitalList(),this.getDepartmentListByHosId(0),this.addForm.createTime=this.getNowDate(),this.addForm.recvTime=this.getNowDate()},methods:{handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getSpecimenList()},handleCurrentChange:function(e){this.queryInfo.pageNum=e,this.getSpecimenList()},addDialogClosed:function(){this.addForm.specimenCode="",this.addForm.patientName="",this.addForm.patientAge="",this.addForm.patientTellphone="",this.addForm.doorNum="",this.addForm.bedNum=""},getNowDate:function(){var e=new Date,t=e.getFullYear(),r=e.getMonth()+1,a=e.getDate();return r<10&&(r="0"+r),a<10&&(a="0"+a),t+"年"+r+"月"+a+"日"},addReport:function(){var e=this;this.$http.post("report/save.do",this.addReportForm,{responseType:"arraybuffer"}).then(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,o,n,i,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new Blob([r.data],{type:"application/pdf;"}),o=document.createElement("a"),n=window.URL.createObjectURL(a),o.href=n,t.next=6,e.$http.post("specimen/getDetailsById.do?specimenId="+e.addReportForm.specimenId);case 6:return i=t.sent,s=i.data,l=s.specimenCode+"-"+s.patientName+"-"+s.testType.dictValue,o.download=decodeURIComponent(l),document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(n),e.getSpecimenList(),e.addReportDialogVisable=!1,t.abrupt("return",e.$message({message:"报告保存成功",type:"success"}));case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},editReport:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$http.post("report/update.do",e.editReportForm,{responseType:"arraybuffer"}).then(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,o,n,i,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new Blob([r.data],{type:"application/pdf;"}),o=document.createElement("a"),n=window.URL.createObjectURL(a),o.href=n,t.next=6,e.$http.post("specimen/getDetailsById.do?specimenId="+e.editReportForm.specimenId);case 6:return i=t.sent,s=i.data,l=s.specimenCode+"-"+s.patientName+"-"+s.testType.dictValue,o.download=decodeURIComponent(l),document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(n),e.getSpecimenList(),e.editReportDialogVisable=!1,t.abrupt("return",e.$message({message:"报告更新成功",type:"success"}));case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},showEditDialog:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.listAllDictionary({dictName:"specimen_situation"}).then((function(e){t.specimenSituationList=e})),t.listAllDictionary({dictName:"test_types"}).then((function(e){t.testTypeList=e})),t.getHospitalList(),t.getDepartmentListByHosId(0),t.getDoctorListByDeptId(0),r.next=7,t.$http.post("specimen/getById.do?specimenId="+e);case 7:a=r.sent,o=a.data,t.listAllDictionary({dictName:o.testTypeId+"_specimen_type"}).then((function(e){t.specimenTypeList=e})),t.editForm=o,t.editDialogVisable=!0;case 12:case"end":return r.stop()}}),r)})))()},editDialogClosed:function(){this.$refs.editFormRef.resetFields()},getSpecimenList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return null!==e.queryInfo.createTimeRange&&""!==e.queryInfo.createTimeRange&&Array.isArray(e.queryInfo.createTimeRange)&&(e.queryInfo.createTime=e.queryInfo.createTimeRange[0]+"--"+e.queryInfo.createTimeRange[1]),null!==e.queryInfo.recvTimeRange&&""!==e.queryInfo.recvTimeRange&&Array.isArray(e.queryInfo.recvTimeRange)&&(e.queryInfo.recvTime=e.queryInfo.recvTimeRange[0]+"--"+e.queryInfo.recvTimeRange[1]),null!==e.queryInfo.reportTimeRange&&""!==e.queryInfo.reportTimeRange&&Array.isArray(e.queryInfo.reportTimeRange)&&(e.queryInfo.reportTime=e.queryInfo.reportTimeRange[0]+"--"+e.queryInfo.reportTimeRange[1]),console.log(e.queryInfo),t.next=6,e.$http.post("specimen/list.do?pageNum="+e.queryInfo.pageNum+"&pageSize="+e.queryInfo.pageSize,{specimenCode:e.queryInfo.specimenCode,patientName:e.queryInfo.patientName,testTypeId:e.queryInfo.testTypeId,specimenTypeId:e.queryInfo.specimenTypeId,specimenStatusId:e.queryInfo.specimenStatusId,hosId:e.queryInfo.hosId,deptId:e.queryInfo.deptId,createTime:e.queryInfo.createTime,recvTime:e.queryInfo.recvTime});case 6:r=t.sent,a=r.data,e.pageResult=a;case 9:case"end":return t.stop()}}),t)})))()},editSpecimen:function(){var e=this;this.$refs.editFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=10;break}return t.next=3,e.$http.post("specimen/update.do",e.editForm);case 3:if(a=t.sent,o=a.data,e.editDialogVisable=!1,!o.success){t.next=9;break}return e.getSpecimenList(),t.abrupt("return",e.$message({message:o.message,type:"success"}));case 9:return t.abrupt("return",e.$message.error(o.message));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},deleteSpecimen:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$confirm("此操作将永久删除该检测样本, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("specimen/delete.do?specimenId="+e);case 2:if(a=r.sent,o=a.data,t.getSpecimenList(),!o.success){r.next=7;break}return r.abrupt("return",t.$message({type:"success",message:o.message}));case 7:return r.abrupt("return",t.$message.error(o.message));case 8:case"end":return r.stop()}}),r)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}));case 1:case"end":return r.stop()}}),r)})))()},getManagerList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a,o,n,i,s,l,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("dictionary/list.do",{dictName:"manager_type_reporter"});case 2:return r=t.sent,a=r.data,t.next=6,e.$http.post("manager/listAll.do",{managerType:a[0].dictId});case 6:return o=t.sent,n=o.data,e.reporterList=n,t.next=11,e.$http.post("dictionary/list.do",{dictName:"manager_type_reviewer"});case 11:return i=t.sent,s=i.data,t.next=15,e.$http.post("manager/listAll.do",{managerType:s[0].dictId});case 15:l=t.sent,c=l.data,e.reviewerList=c;case 18:case"end":return t.stop()}}),t)})))()},showAddReportDialog:function(e,t){var r=this;return Object(g["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.addReportForm.specimenId=e,console.log(t+"_result"),r.listAllDictionary({dictName:t+"_result"}).then((function(e){r.specimenResultList=e,console.log("data"),console.log(e),r.addReportForm.specimenResultId=e[0].dictId,r.addReportForm.referenceValueId=e[0].dictId})),r.getManagerList().then((function(e){r.addReportForm.reporterId=r.reporterList[0].managerId,r.addReportForm.reviewerId=r.reviewerList[0].managerId})),r.addReportDialogVisable=!0;case 5:case"end":return a.stop()}}),a)})))()},showEditReportDialog:function(e,t,r){var a=this;return Object(g["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:a.editReportForm.reportId=e,a.editReportForm.specimenId=t,a.listAllDictionary({dictName:r+"_result"}).then((function(e){a.specimenResultList=e,a.editReportForm.specimenResultId=a.specimenResultList[0].dictId,a.editReportForm.referenceValueId=a.specimenResultList[0].dictId})),a.getManagerList().then((function(e){a.editReportForm.reporterId=a.reporterList[0].managerId,a.editReportForm.reviewerId=a.reviewerList[0].managerId})),a.editReportDialogVisable=!0;case 5:case"end":return o.stop()}}),o)})))()},addReportDialogClosed:function(){this.$refs.addReportFormRef.resetFields()},editReportDialogClosed:function(){this.$refs.editReportFormRef.resetFields()},diagnosticItemSelectChanged:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("dictionary/list.do",{dictName:e+"_result"});case 2:a=r.sent,o=a.data,t.specimenResultList=o,t.addReportForm.specimenResultId=o[0].dictId,t.addReportForm.referenceValueId=o[0].dictId;case 7:case"end":return r.stop()}}),r)})))()},listAllDictionary:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("dictionary/list.do",e);case 2:return a=r.sent,o=a.data,r.abrupt("return",o);case 5:case"end":return r.stop()}}),r)})))()},getHospitalList:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("hosName"+e),r.next=3,t.$http.post("hospital/listAll.do",{hosName:e});case 3:a=r.sent,o=a.data,t.hospitalList=o,console.log(t.hospitalList);case 7:case"end":return r.stop()}}),r)})))()},showAddDialog:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.listAllDictionary({dictName:"test_types"}).then((function(t){return e.testTypeList=t,e.listAllDictionary({dictName:t[0].dictId+"_specimen_type"})})).then((function(t){e.specimenTypeList=t})),e.listAllDictionary({dictName:"specimen_situation"}).then((function(t){e.specimenSituationList=t})),e.addDialogVisable=!0,e.$nextTick((function(){this.$refs.specimenCodeRef.focus()}));case 4:case"end":return t.stop()}}),t)})))()},addSpecimen:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=10;break}return t.next=3,e.$http.post("specimen/save.do",e.addForm);case 3:if(a=t.sent,o=a.data,e.addDialogVisable=!1,!o.success){t.next=9;break}return e.getSpecimenList(),t.abrupt("return",e.$message({message:o.message,type:"success"}));case 9:return t.abrupt("return",e.$message.error(o.message));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getDepartmentListByHosId:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("department/listAll.do?",{hosId:e});case 2:a=r.sent,o=a.data,t.departmentList=o;case 5:case"end":return r.stop()}}),r)})))()},getDoctorListByDeptId:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("doctor/listAll.do",{docName:"",deptId:e});case 2:a=r.sent,o=a.data,t.doctorList=o;case 5:case"end":return r.stop()}}),r)})))()},addFormTestTypeChanged:function(){var e=this;this.listAllDictionary({dictName:this.addForm.testTypeId+"_specimen_type"}).then((function(t){e.specimenTypeList=t,e.addForm.specimenTypeId=t[0].dictId}))},editFormTestTypeChanged:function(){var e=this;this.listAllDictionary({dictName:this.editForm.testTypeId+"_specimen_type"}).then((function(t){e.specimenTypeList=t,e.editForm.specimenTypeId=t[0].dictId}))},batchImportSuccess:function(e,t){return e.success?(this.getSpecimenList(),this.$message({message:e.message,type:"success"})):this.$message.error(e.message)}},directives:{focus:{inserted:function(e,t){var r="el-input",a="input",o=t.value||!0;o="boolean"===typeof o?{cls:r,tag:a,foc:o}:{cls:o.cls||r,tag:o.tag||a,foc:o.foc||!1},e.classList.contains(o.cls)&&o.foc&&e.getElementsByTagName(o.tag)[0].focus()}}}},G=P,J=(r("053c"),Object(l["a"])(G,H,E,!1,null,"480d37cc",null)),K=J.exports,Y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("用户")]),r("el-breadcrumb-item",[e._v("用户列表")])],1),r("el-card",{staticClass:"box-card"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:5}},[r("el-select",{attrs:{placeholder:"用户状态"},on:{change:e.getUserList},model:{value:e.queryInfo.userStatus,callback:function(t){e.$set(e.queryInfo,"userStatus",t)},expression:"queryInfo.userStatus"}},[r("el-option",{key:"1",attrs:{label:"未删除",value:"1"}}),r("el-option",{key:"2",attrs:{label:"已删除",value:"2"}}),r("el-option",{key:"0",attrs:{label:"全部角色",value:"0"}})],1)],1),r("el-col",{attrs:{span:5}},[r("div",{staticClass:"grid-content bg-purple"},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入用户姓名"},on:{change:e.getUserList},model:{value:e.queryInfo.name,callback:function(t){e.$set(e.queryInfo,"name",t)},expression:"queryInfo.name"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUserList},slot:"append"})],1)],1)]),(((e.rightList||{}).userManagement||{}).userAction||{}).saveUser?r("el-col",{attrs:{span:6}},[r("div",{staticClass:"grid-content bg-purple"},[r("el-button",{attrs:{type:"primary"},on:{click:e.showAddDialog}},[e._v("添加用户")])],1)]):e._e()],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.pageResult.rows,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"index",label:"#",width:"50"}}),r("el-table-column",{attrs:{prop:"loginName",label:"登录账号"}}),r("el-table-column",{attrs:{prop:"loginPasswd",label:"密码"}}),r("el-table-column",{attrs:{prop:"name",label:"姓名"}}),r("el-table-column",{attrs:{prop:"role.roleName",label:"角色"}}),r("el-table-column",{attrs:{prop:"telephone",label:"电话"}}),r("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),r("el-table-column",{attrs:{prop:"registerTime",label:"注册时间"}}),r("el-table-column",{attrs:{prop:"department",label:"部门"}}),r("el-table-column",{attrs:{prop:"post",label:"职位"}}),(((e.rightList||{}).userManagement||{}).userAction||{}).updateUser||(((e.rightList||{}).userManagement||{}).userAction||{}).deleteUser?r("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return(((e.rightList||{}).userManagement||{}).userAction||{}).updateUser||(((e.rightList||{}).userManagement||{}).userAction||{}).deleteUser?[r("el-tooltip",{attrs:{effect:"dark",content:"编辑",placement:"top",enterable:!1}},[(((e.rightList||{}).userManagement||{}).userAction||{}).updateUser?r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.showEditDialog(t.row.userId)}}}):e._e()],1),(((e.rightList||{}).userManagement||{}).userAction||{}).deleteUser&&1==t.row.userStatus?r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.deleteUser(t.row.userId)}}}):e._e(),(((e.rightList||{}).userManagement||{}).userAction||{}).deleteUser&&2==t.row.userStatus?r("el-button",{attrs:{type:"success",icon:"el-icon-upload2",size:"mini"},on:{click:function(r){return e.cancelDeleteUser(t.row.userId)}}},[e._v("取消删除")]):e._e()]:void 0}}],null,!0)}):e._e()],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-sizes":[5,10,15,20],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageResult.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:"添加用户",visible:e.addDialogVisable,width:"40%"},on:{"update:visible":function(t){e.addDialogVisable=t},close:e.addDialogClosed}},[r("el-form",{ref:"addFormRef",staticClass:"demo-addForm",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"100px"}},[r("el-row",{attrs:{gutter:0}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"用户名",prop:"loginName"}},[r("el-input",{model:{value:e.addForm.loginName,callback:function(t){e.$set(e.addForm,"loginName",t)},expression:"addForm.loginName"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"密码",prop:"loginPasswd"}},[r("el-input",{model:{value:e.addForm.loginPasswd,callback:function(t){e.$set(e.addForm,"loginPasswd",t)},expression:"addForm.loginPasswd"}})],1)],1)],1),r("el-row",{attrs:{gutter:0}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"姓名",prop:"name"}},[r("el-input",{model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"角色",prop:"roleId"}},[r("el-select",{attrs:{placeholder:"选择角色",filterable:""},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.addForm.roleId,callback:function(t){e.$set(e.addForm,"roleId",t)},expression:"addForm.roleId"}},e._l(e.roleList,(function(e){return r("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})),1)],1)],1)],1),r("el-row",{attrs:{gutter:0}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"部门",prop:"department"}},[r("el-input",{model:{value:e.addForm.department,callback:function(t){e.$set(e.addForm,"department",t)},expression:"addForm.department"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"职务",prop:"post"}},[r("el-input",{model:{value:e.addForm.post,callback:function(t){e.$set(e.addForm,"post",t)},expression:"addForm.post"}})],1)],1)],1),r("el-row",{attrs:{gutter:0}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"电话",prop:"telephone"}},[r("el-input",{model:{value:e.addForm.telephone,callback:function(t){e.$set(e.addForm,"telephone",t)},expression:"addForm.telephone"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{model:{value:e.addForm.email,callback:function(t){e.$set(e.addForm,"email",t)},expression:"addForm.email"}})],1)],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisable=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")])],1)],1)],1),r("el-dialog",{attrs:{title:"修改用户信息",visible:e.editDialogVisable,width:"40%"},on:{"update:visible":function(t){e.editDialogVisable=t},close:e.editDialogClosed}},[r("el-form",{ref:"editFormRef",staticClass:"demo-addForm",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"100px"}},[r("el-row",{attrs:{gutter:0}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"用户名",prop:"loginName"}},[r("el-input",{model:{value:e.editForm.loginName,callback:function(t){e.$set(e.editForm,"loginName",t)},expression:"editForm.loginName"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"密码",prop:"loginPasswd"}},[r("el-input",{model:{value:e.editForm.loginPasswd,callback:function(t){e.$set(e.editForm,"loginPasswd",t)},expression:"editForm.loginPasswd"}})],1)],1)],1),r("el-row",{attrs:{gutter:0}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"姓名",prop:"name"}},[r("el-input",{model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"角色",prop:"roleId"}},[r("el-select",{attrs:{placeholder:"选择角色",filterable:""},on:{"visible-change":function(t){return e.$forceUpdate()}},model:{value:e.editForm.roleId,callback:function(t){e.$set(e.editForm,"roleId",t)},expression:"editForm.roleId"}},e._l(e.roleList,(function(e){return r("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})),1)],1)],1)],1),r("el-row",{attrs:{gutter:0}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"部门",prop:"department"}},[r("el-input",{model:{value:e.editForm.department,callback:function(t){e.$set(e.editForm,"department",t)},expression:"editForm.department"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"职务",prop:"post"}},[r("el-input",{model:{value:e.editForm.post,callback:function(t){e.$set(e.editForm,"post",t)},expression:"editForm.post"}})],1)],1)],1),r("el-row",{attrs:{gutter:0}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"电话",prop:"telephone"}},[r("el-input",{model:{value:e.editForm.telephone,callback:function(t){e.$set(e.editForm,"telephone",t)},expression:"editForm.telephone"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{model:{value:e.editForm.email,callback:function(t){e.$set(e.editForm,"email",t)},expression:"editForm.email"}})],1)],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisable=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.updateUser}},[e._v("确 定")])],1)],1)],1)},Q=[],W=(r("b0c0"),{data:function(){return{pageResult:{total:0,rows:[]},queryInfo:{pageNum:1,pageSize:5,hosName:""},addDialogVisable:!1,addForm:{hosName:"",hosAddress:""},addFormRules:{loginName:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:4,max:16,message:"长度在 4 到 16 个字符",trigger:"blur"}],loginPasswd:[{required:!0,message:"请输入密码",trigger:"blur"}],roleId:[{required:!0,message:"请选择用户的角色",trigger:"blur"}]},editDialogVisable:!1,editForm:{hosId:0,hosName:"",hosAddress:""},editFormRules:{loginName:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:4,max:16,message:"长度在 4 到 16 个字符",trigger:"blur"}],loginPasswd:[{required:!0,message:"请输入密码",trigger:"blur"}],roleId:[{required:!0,message:"请选择用户的角色",trigger:"blur"}]},rightList:{},roleList:[]}},created:function(){var e=this;this.getRight().then((function(t){e.queryInfo.userStatus="1",e.getUserList()}))},methods:{handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getUserList()},handleCurrentChange:function(e){this.queryInfo.pageNum=e,this.getUserList()},addDialogClosed:function(){this.$refs.addFormRef.resetFields()},addUser:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,o,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=16;break}return t.next=3,e.$http.post("user/checkLoginNameExist.do?loginName="+e.addForm.loginName);case 3:if(a=t.sent,o=a.data,!o){t.next=7;break}return t.abrupt("return",e.$message.error("该用户名已存在"));case 7:return t.next=9,e.$http.post("user/save.do",e.addForm);case 9:if(n=t.sent,i=n.data,e.addDialogVisable=!1,!i.success){t.next=15;break}return e.getUserList(),t.abrupt("return",e.$message({message:"添加用户成功",type:"success"}));case 15:return t.abrupt("return",e.$message.error("添加用户失败"));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},showEditDialog:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.getAllRole().then(function(){var r=Object(g["a"])(regeneratorRuntime.mark((function r(a){var o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("user/getByUserId.do?userId="+e);case 2:o=r.sent,n=o.data,t.editForm=n,t.editDialogVisable=!0;case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()},editDialogClosed:function(){this.$refs.editFormRef.resetFields()},getUserList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(void 0!==(((e.rightList||{}).userManagement||{}).userAction||{}).listUser){t.next=2;break}return t.abrupt("return",e.$message.error("对不起，您没有查询用户的权限"));case 2:return t.next=4,e.$http.post("user/list.do?pageNum="+e.queryInfo.pageNum+"&pageSize="+e.queryInfo.pageSize,{name:e.queryInfo.name,userStatus:e.queryInfo.userStatus});case 4:r=t.sent,a=r.data,e.pageResult=a;case 7:case"end":return t.stop()}}),t)})))()},updateUser:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.editFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=10;break}return t.next=3,e.$http.post("user/update.do",e.editForm);case 3:if(a=t.sent,o=a.data,e.editDialogVisable=!1,!o.success){t.next=9;break}return e.getUserList(),t.abrupt("return",e.$message({message:"修改用户信息成功",type:"success"}));case 9:return t.abrupt("return",e.$message.error("修改用户信息失败"));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},deleteUser:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("user/delete.do?userId="+e);case 2:if(a=r.sent,o=a.data,!o.success){r.next=7;break}return t.getUserList(),r.abrupt("return",t.$message({type:"success",message:o.message}));case 7:return r.abrupt("return",t.$message.error(o.message));case 8:case"end":return r.stop()}}),r)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}));case 1:case"end":return r.stop()}}),r)})))()},getRight:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=window.sessionStorage.getItem("loginName"),t.next=3,e.$http.post("right/listByLoginName.do?loginName="+r);case 3:a=t.sent,o=a.data,e.rightList=o;case 6:case"end":return t.stop()}}),t)})))()},getAllRole:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("role/listAll.do",{roleStatus:1});case 2:r=t.sent,a=r.data,e.roleList=a;case 5:case"end":return t.stop()}}),t)})))()},showAddDialog:function(){var e=this;this.getAllRole().then((function(t){e.addDialogVisable=!0}))},cancelDeleteUser:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("user/cancelDelete.do?userId="+e);case 2:if(a=r.sent,o=a.data,!o.success){r.next=7;break}return t.getUserList(),r.abrupt("return",t.$message({type:"success",message:o.message}));case 7:return r.abrupt("return",t.$message.error(o.message));case 8:case"end":return r.stop()}}),r)})))()}}}),X=W,Z=(r("cacf"),Object(l["a"])(X,Y,Q,!1,null,"697a3174",null)),ee=Z.exports,te=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("角色")]),r("el-breadcrumb-item",[e._v("角色列表")])],1),r("el-card",{staticClass:"box-card"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:5}},[r("el-select",{attrs:{placeholder:"角色状态"},on:{change:e.getRoleList},model:{value:e.queryInfo.roleStatus,callback:function(t){e.$set(e.queryInfo,"roleStatus",t)},expression:"queryInfo.roleStatus"}},[r("el-option",{key:"1",attrs:{label:"未删除",value:"1"}}),r("el-option",{key:"2",attrs:{label:"已删除",value:"2"}}),r("el-option",{key:"0",attrs:{label:"全部角色",value:"0"}})],1)],1),r("el-col",{attrs:{span:5}},[r("div",{staticClass:"grid-content bg-purple"},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入角色姓名"},on:{change:e.getRoleList},model:{value:e.queryInfo.roleName,callback:function(t){e.$set(e.queryInfo,"roleName",t)},expression:"queryInfo.roleName"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getRoleList},slot:"append"})],1)],1)]),(((e.right||{}).roleManagement||{}).roleAction||{}).saveRole?r("el-col",{attrs:{span:6}},[r("div",{staticClass:"grid-content bg-purple"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialogVisable=!0}}},[e._v("添加角色")])],1)]):e._e()],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.pageResult.rows,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.rightList,(function(a,o){return r("el-row",{key:o,staticClass:"vcenter",attrs:{gutter:20}},[r("el-col",{attrs:{span:5}},[r("el-tag",{attrs:{closable:""},on:{close:function(r){return e.deleteRight(t.row,a)}}},[e._v(e._s(a.rightName))]),r("i",{staticClass:"el-icon-caret-right"})],1),r("el-col",{attrs:{span:19}},e._l(a.children,(function(a,o){return r("el-row",{key:o,class:["bdbottom","vcenter"],attrs:{gutter:20}},[r("el-col",{attrs:{span:5}},[r("el-tag",{attrs:{type:"success",closable:""},on:{close:function(r){return e.deleteRight(t.row,a)}}},[e._v(e._s(a.rightName))]),r("i",{staticClass:"el-icon-caret-right"})],1),r("el-col",{attrs:{span:19}},[r("el-row",{attrs:{gutter:20}},e._l(a.children,(function(a,o){return r("el-col",{key:o,attrs:{span:6}},[r("el-tag",{attrs:{type:"danger",closable:""},on:{close:function(r){return e.deleteRight(t.row,a)}}},[e._v(e._s(a.rightName))])],1)})),1)],1)],1)})),1)],1)}))}}])}),r("el-table-column",{attrs:{type:"index",label:"#",width:"150"}}),r("el-table-column",{attrs:{prop:"roleName",label:"角色名称"}}),r("el-table-column",{attrs:{prop:"roleIntro",label:"角色介绍"}}),(((e.right||{}).roleManagement||{}).roleAction||{}).updateRole||(((e.right||{}).roleManagement||{}).roleAction||{}).setRoleRight?r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[(((e.right||{}).roleManagement||{}).roleAction||{}).updateRole?r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.showEditDialog(t.row.roleId)}}},[e._v("编辑")]):e._e(),(((e.right||{}).roleManagement||{}).roleAction||{}).setRoleRight?r("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(r){return e.showSetRightDialog(t.row)}}},[e._v("分配权限")]):e._e(),1==t.row.roleStatus&&(((e.right||{}).roleManagement||{}).roleAction||{}).deleteRole?r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.deleteRole(t.row.roleId)}}},[e._v("删除")]):e._e(),2==t.row.roleStatus&&(((e.right||{}).roleManagement||{}).roleAction||{}).cancelDeleteRole?r("el-button",{attrs:{type:"success",icon:"el-icon-upload2",size:"mini"},on:{click:function(r){return e.cancelDeleteRole(t.row)}}},[e._v("取消删除")]):e._e()]}}],null,!1,506706599)}):e._e()],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-sizes":[5,10,15,20],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageResult.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:"添加角色",visible:e.addDialogVisable,width:"40%"},on:{"update:visible":function(t){e.addDialogVisable=t},close:e.addDialogClosed}},[r("el-form",{ref:"addFormRef",staticClass:"demo-addForm",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"角色名",prop:"roleName"}},[r("el-input",{model:{value:e.addForm.roleName,callback:function(t){e.$set(e.addForm,"roleName",t)},expression:"addForm.roleName"}})],1),r("el-form-item",{attrs:{label:"角色介绍",prop:"roleIntro"}},[r("el-input",{model:{value:e.addForm.roleIntro,callback:function(t){e.$set(e.addForm,"roleIntro",t)},expression:"addForm.roleIntro"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisable=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addRole}},[e._v("确 定")])],1)],1)],1),r("el-dialog",{attrs:{title:"修改角色信息",visible:e.editDialogVisable,width:"40%"},on:{"update:visible":function(t){e.editDialogVisable=t},close:e.editDialogClosed}},[r("el-form",{ref:"editFormRef",staticClass:"demo-addForm",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"角色名称",prop:"hosName"}},[r("el-input",{model:{value:e.editForm.roleName,callback:function(t){e.$set(e.editForm,"roleName",t)},expression:"editForm.roleName"}})],1),r("el-form-item",{attrs:{label:"角色介绍",prop:"hosAddress"}},[r("el-input",{model:{value:e.editForm.roleIntro,callback:function(t){e.$set(e.editForm,"roleIntro",t)},expression:"editForm.roleIntro"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisable=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.updateRole}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"分配权限",visible:e.setRightDialogVisable,width:"40%"},on:{"update:visible":function(t){e.setRightDialogVisable=t},close:e.setRightDialogClosed}},[r("el-form",{staticClass:"demo-addForm",attrs:{model:e.setRightForm,"label-width":"100px"}},[r("el-tree",{ref:"rightListTreeRef",attrs:{data:e.rightList,props:e.rightProps,"show-checkbox":"","node-key":"rightId","default-expand-all":"","default-checked-keys":e.roleRightList}})],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.setRightDialogVisable=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.updateRoleRight}},[e._v("确 定")])],1)],1)],1)},re=[],ae=(r("4160"),r("159b"),{data:function(){return{pageResult:{total:0,rows:[]},queryInfo:{pageNum:1,pageSize:5,roleName:""},addDialogVisable:!1,addForm:{roleName:"",roleIntro:""},addFormRules:{roleName:[{required:!0,message:"请输入角色名",trigger:"blur"}]},editDialogVisable:!1,editForm:{roleId:0,roleName:"",roleIntro:""},editFormRules:{roleName:[{required:!0,message:"请输入角色名",trigger:"blur"}]},setRightDialogVisable:!1,setRightForm:{},rightList:[],rightProps:{children:"children",label:"rightName"},roleRightList:[],level3RightList:[],right:{}}},created:function(){var e=this;this.getRight().then((function(t){e.queryInfo.roleStatus="1",e.getRoleList()}))},methods:{handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getRoleList()},handleCurrentChange:function(e){this.queryInfo.pageNum=e,this.getRoleList()},addDialogClosed:function(){this.$refs.addFormRef.resetFields()},addRole:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=10;break}return t.next=3,e.$http.post("role/save.do",e.addForm);case 3:if(a=t.sent,o=a.data,e.addDialogVisable=!1,!o.success){t.next=9;break}return e.getRoleList(),t.abrupt("return",e.$message({message:"添加角色成功",type:"success"}));case 9:return t.abrupt("return",e.$message.error("添加角色失败"));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},showEditDialog:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("role/getById.do?roleId="+e);case 2:a=r.sent,o=a.data,t.editForm=o,t.editDialogVisable=!0;case 6:case"end":return r.stop()}}),r)})))()},editDialogClosed:function(){this.$refs.editFormRef.resetFields()},getRoleList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if((((e.right||{}).roleManagement||{}).roleAction||{}).selectRole){t.next=2;break}return t.abrupt("return",e.$message.error("对不起，您没有查看角色的权限"));case 2:return t.next=4,e.$http.post("role/list.do?pageNum="+e.queryInfo.pageNum+"&pageSize="+e.queryInfo.pageSize,{roleName:e.queryInfo.roleName,roleStatus:e.queryInfo.roleStatus});case 4:r=t.sent,a=r.data,e.pageResult=a;case 7:case"end":return t.stop()}}),t)})))()},updateRole:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.editFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=10;break}return t.next=3,e.$http.post("role/update.do",e.editForm);case 3:if(a=t.sent,o=a.data,e.editDialogVisable=!1,!o.success){t.next=9;break}return e.getRoleList(),t.abrupt("return",e.$message({message:o.message,type:"success"}));case 9:return t.abrupt("return",e.$message.error(o.message));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},deleteRole:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$confirm("此操作将永久删除该角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("role/delete.do?roleId="+e);case 2:if(a=r.sent,o=a.data,!o.success){r.next=7;break}return t.getRoleList(),r.abrupt("return",t.$message({type:"success",message:o.message}));case 7:return r.abrupt("return",t.$message.error(o.message));case 8:case"end":return r.stop()}}),r)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}));case 1:case"end":return r.stop()}}),r)})))()},getRightList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("right/listAll.do");case 2:r=t.sent,a=r.data,e.rightList=a,e.rightList.forEach((function(t){t.children.forEach((function(t){t.children.forEach((function(t){e.level3RightList.push(t.rightId)}))}))}));case 6:case"end":return t.stop()}}),t)})))()},showSetRightDialog:function(e){var t=this;this.getRightList().then((function(r){e.rightList.forEach((function(e){e.children.forEach((function(e){e.children.forEach((function(e){t.roleRightList.push(e.rightId)}))}))})),t.setRightForm=e,t.setRightDialogVisable=!0,t.$nextTick((function(){t.$refs.rightListTreeRef.setCheckedKeys(t.roleRightList,!0)}))}))},setRightDialogClosed:function(){this.setRightDialogVisable=!1,this.roleRightList=[]},updateRoleRight:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a,o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=[],e.$refs.rightListTreeRef.getCheckedKeys().forEach((function(t){var a=e.level3RightList.indexOf(t);-1!==a&&r.push(t)})),a=JSON.stringify(r),a=a.substring(1,a.length-1),console.log(a),t.next=7,e.$http.post("roleright/batchSave.do?roleId="+e.setRightForm.roleId+"&rightListString="+a);case 7:if(o=t.sent,n=o.data,e.setRightDialogVisable=!1,e.getRoleList(),!n.success){t.next=13;break}return t.abrupt("return",e.$message({message:n.message,type:"success"}));case 13:return t.abrupt("return",e.$message.error(n.message));case 14:case"end":return t.stop()}}),t)})))()},cancelDeleteRole:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.roleStatus=1,r.next=3,t.$http.post("role/update.do",e);case 3:if(a=r.sent,o=a.data,!o.success){r.next=8;break}return t.getRoleList(),r.abrupt("return",t.$message({message:o.message,type:"success"}));case 8:return r.abrupt("return",t.$message.error(o.message));case 9:case"end":return r.stop()}}),r)})))()},getRight:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=window.sessionStorage.getItem("loginName"),t.next=3,e.$http.post("right/listByLoginName.do?loginName="+r);case 3:a=t.sent,o=a.data,e.right=o;case 6:case"end":return t.stop()}}),t)})))()},deleteRight:function(e,t){var r=this;return Object(g["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.$confirm("此操作将永久删除该权限, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(g["a"])(regeneratorRuntime.mark((function a(){var o,n,i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,r.$http.post("roleright/delete.do?roleId="+e.roleId,t);case 2:if(o=a.sent,n=o.data,!n.success){a.next=11;break}return a.next=7,r.$http.post("roleright/getByRoleId.do?roleId="+e.roleId);case 7:return i=a.sent,s=i.data,e.rightList=s,a.abrupt("return",r.$message({type:"success",message:n.message}));case 11:return a.abrupt("return",r.$message.error(n.message));case 12:case"end":return a.stop()}}),a)})))).catch((function(){r.$message({type:"info",message:"已取消删除"})}));case 1:case"end":return a.stop()}}),a)})))()}}}),oe=ae,ne=(r("52aa"),Object(l["a"])(oe,te,re,!1,null,"69751c8d",null)),ie=ne.exports,se=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("操作")]),r("el-breadcrumb-item",[e._v("报告列表")])],1),r("el-card",{staticClass:"box-card"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("div",{staticClass:"grid-content bg-purple"},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:e.queryInfo.searchEntity.hosName,callback:function(t){e.$set(e.queryInfo.searchEntity,"hosName",t)},expression:"queryInfo.searchEntity.hosName"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1)]),r("el-col",{attrs:{span:6}},[r("div",{staticClass:"grid-content bg-purple"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialogVisable=!0}}},[e._v("添加样本")])],1)])],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.hospitalList,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"index",label:"#",width:"50"}}),r("el-table-column",{attrs:{prop:"hos_name",label:"医院名称",width:"180"}}),r("el-table-column",{attrs:{prop:"uuid",label:"uuid",width:"180"}}),r("el-table-column",{attrs:{prop:"level",label:"等级"}}),r("el-table-column",{attrs:{prop:"hos_path",label:"隶属"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{attrs:{effect:"dark",content:"编辑",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.showEditDialog(t.row.hos_name)}}})],1),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"}})]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-sizes":[1,2,5,10],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:"添加医院",visible:e.addDialogVisable,width:"40%"},on:{"update:visible":function(t){e.addDialogVisable=t},close:e.addDialogClosed}},[r("el-form",{ref:"addFormRef",staticClass:"demo-addForm",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"医院名称",prop:"hosName"}},[r("el-input",{model:{value:e.addForm.hosName,callback:function(t){e.$set(e.addForm,"hosName",t)},expression:"addForm.hosName"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisable=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addHosipital}},[e._v("确 定")])],1)],1)],1),r("el-dialog",{attrs:{title:"修改医院信息",visible:e.editDialogVisable,width:"40%"},on:{"update:visible":function(t){e.editDialogVisable=t},close:e.editDialogClosed}},[r("el-form",{ref:"editFormRef",staticClass:"demo-addForm",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"医院名称",prop:"hosName"}},[r("el-input",{model:{value:e.addForm.hosName,callback:function(t){e.$set(e.addForm,"hosName",t)},expression:"addForm.hosName"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisable=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addHosipital}},[e._v("确 定")])],1)],1)],1)},le=[],ce={data:function(){return{hospitalList:[{hos_name:"医院1",uuid:"1234564789",level:"三甲医院",hos_path:"省级"},{hos_name:"医院1",uuid:"1234564789",level:"三甲医院",hos_path:"省级"},{hos_name:"医院1",uuid:"1234564789",level:"三甲医院",hos_path:"省级"},{hos_name:"医院1",uuid:"1234564789",level:"三甲医院",hos_path:"省级"},{hos_name:"医院1",uuid:"1234564789",level:"三甲医院",hos_path:"省级"},{hos_name:"医院1",uuid:"1234564789",level:"三甲医院",hos_path:"省级"},{hos_name:"医院1",uuid:"1234564789",level:"三甲医院",hos_path:"省级"}],queryInfo:{hos_name:"",pageNum:1,pageSize:2,searchEntity:{hosName:""}},total:4,addDialogVisable:!1,addForm:{hosName:""},addFormRules:{hosName:[{required:!0,message:"请输入医院名",trigger:"blur"}]},editDialogVisable:!1,editForm:{hosName:""},editFormRules:{hosName:[{required:!0,message:"请输入医院名",trigger:"blur"}]}}},created:function(){},methods:{handleSizeChange:function(e){this.queryInfo.pageSize=e},handleCurrentChange:function(e){this.queryInfo.pageNum=e},addDialogClosed:function(){this.$refs.addFormRef.resetFields()},addHosipital:function(){this.addDialogVisable=!1,this.$refs.addFormRef.validate((function(e){}))},showEditDialog:function(e){console.log(e),this.editDialogVisable=!0},editDialogClosed:function(){this.$refs.editFormRef.resetFields()}}},de=ce,ue=Object(l["a"])(de,se,le,!1,null,"aaf74212",null),pe=ue.exports,me=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login_container"},[r("div",{staticClass:"login_box"},[e._m(0),r("el-form",{ref:"loginFormRef",staticClass:"login_form",attrs:{"label-width":"0px",model:e.loginForm,rules:e.loginFormRules}},[r("el-form-item",{attrs:{prop:"loginName"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-user-solid",placeholder:"请输入用户名"},on:{change:e.checkLogin},model:{value:e.loginForm.loginName,callback:function(t){e.$set(e.loginForm,"loginName",t)},expression:"loginForm.loginName"}})],1),r("el-form-item",{attrs:{prop:"loginPasswd"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-s-cooperation",placeholder:"请输入密码","show-password":""},on:{change:e.checkLogin},model:{value:e.loginForm.loginPasswd,callback:function(t){e.$set(e.loginForm,"loginPasswd",t)},expression:"loginForm.loginPasswd"}})],1),r("el-form-item",{staticClass:"btns"},[r("el-button",{attrs:{type:"success"},on:{click:e.checkLogin}},[e._v("登录")]),r("el-button",{attrs:{type:"info"},on:{click:e.resetLoginFormFields}},[e._v("重置")])],1)],1)],1)])},ge=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"avatar_box"},[a("img",{attrs:{src:r("cf05")}})])}],fe={data:function(){return{loginForm:{loginName:"",loginPasswd:""},loginFormRules:{loginName:[{required:!0,message:"请输入账号",trigger:"blur"},{min:4,max:16,message:"长度在 4 到 16 个字符",trigger:"blur"}],loginPasswd:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{checkLogin:function(){var e=this;this.$refs.loginFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=10;break}return t.next=3,e.$http.post("user/checkLogin.do",e.loginForm);case 3:if(a=t.sent,o=a.data,!o.success){t.next=9;break}return window.sessionStorage.setItem("loginName",e.loginForm.loginName),e.$router.push("/home"),t.abrupt("return",e.$message({message:o.message,type:"success"}));case 9:return t.abrupt("return",e.$message.error(o.message));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetLoginFormFields:function(){this.$refs.loginFormRef.resetFields()},getRight:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=window.sessionStorage.getItem("loginName"),t.next=3,e.$http.post("right/listByLoginName.do?loginName="+r);case 3:a=t.sent,o=a.data,window.sessionStorage.setItem("rightList",JSON.stringify(o));case 6:case"end":return t.stop()}}),t)})))()}}},he=fe,be=(r("b177"),Object(l["a"])(he,me,ge,!1,null,"681cd68e",null)),ve=be.exports;a["default"].use(u["a"]);var ye=[{path:"/",redirect:"/login"},{path:"/home",component:v,children:[{path:"/hospitals",component:k},{path:"/doctors",component:D},{path:"/departments",component:A},{path:"/specimens",component:B},{path:"/report",component:K},{path:"/managers",component:pe},{path:"/users",component:ee},{path:"/roles",component:ie}]},{path:"/login",component:ve}],Ie=new u["a"]({routes:ye});Ie.beforeEach((function(e,t,r){if("/login"===e.path)return r();var a=window.sessionStorage.getItem("loginName"),o=JSON.parse(window.sessionStorage.getItem("rightList"));return"/hospitals"===e.path&&void 0===((o||{}).hospitalManagement||{}).hospitalAction||"/departments"===e.path&&void 0===((o||{}).hospitalManagement||{}).departmentAction||"/doctors"===e.path&&void 0===((o||{}).hospitalManagement||{}).doctorAction||"/specimens"===e.path&&void 0===((o||{}).specimenManagement||{}).specimenAction||"/specimens"===e.path&&void 0===((o||{}).specimenManagement||{}).specimenAction||"/users"===e.path&&void 0===((o||{}).userManagement||{}).userAction||"/roles"===e.path&&void 0===((o||{}).roleManagement||{}).roleAction?r(t.path):a?void r():r("/login")}));var we=Ie,Re=(r("9e1f"),r("450d"),r("6ed5")),Fe=r.n(Re),ke=(r("0fb7"),r("f529")),xe=r.n(ke),Ne=(r("5e32"),r("6721")),$e=r.n(Ne),Le=(r("f225"),r("89a9")),_e=r.n(Le),De=(r("826b"),r("c263")),Ce=r.n(De),Te=(r("cbb5"),r("8bbc")),Se=r.n(Te),qe=(r("eca7"),r("3787")),Ve=r.n(qe),Ae=(r("425f"),r("4105")),Me=r.n(Ae),Oe=(r("a7cc"),r("df33")),je=r.n(Oe),Ue=(r("672e"),r("101e")),ze=r.n(Ue),Be=(r("0c67"),r("299c")),He=r.n(Be),Ee=(r("5466"),r("ecdf")),Pe=r.n(Ee),Ge=(r("38a0"),r("ad41")),Je=r.n(Ge),Ke=(r("f4f9"),r("c2cc")),Ye=r.n(Ke),Qe=(r("7a0f"),r("0f6c")),We=r.n(Qe),Xe=(r("6611"),r("e772")),Ze=r.n(Xe),et=(r("1f1a"),r("4e4b")),tt=r.n(et),rt=(r("10cb"),r("f3ad")),at=r.n(rt),ot=(r("b8e0"),r("a4c4")),nt=r.n(ot),it=(r("b84d"),r("c216")),st=r.n(it),lt=(r("8f24"),r("76b9")),ct=r.n(lt),dt=(r("8bd8"),r("4cb2")),ut=r.n(dt),pt=(r("34db"),r("3803")),mt=r.n(pt),gt=(r("ce18"),r("f58e")),ft=r.n(gt),ht=(r("4ca3"),r("443e")),bt=r.n(ht),vt=(r("de31"),r("c69e")),yt=r.n(vt),It=(r("a769"),r("5cc3")),wt=r.n(It),Rt=(r("a673"),r("7b31")),Ft=r.n(Rt),kt=(r("adec"),r("3d2d")),xt=r.n(kt),Nt=(r("1951"),r("eedf")),$t=r.n(Nt);a["default"].use($t.a),a["default"].use(xt.a),a["default"].use(Ft.a),a["default"].use(wt.a),a["default"].use(yt.a),a["default"].use(bt.a),a["default"].use(ft.a),a["default"].use(mt.a),a["default"].use(ut.a),a["default"].use(ct.a),a["default"].use(st.a),a["default"].use(nt.a),a["default"].use(at.a),a["default"].use(tt.a),a["default"].use(Ze.a),a["default"].use(We.a),a["default"].use(Ye.a),a["default"].use(Je.a),a["default"].use(Pe.a),a["default"].use(He.a),a["default"].use(ze.a),a["default"].use(je.a),a["default"].use(Me.a),a["default"].use(Ve.a),a["default"].use(Se.a),a["default"].use(Ce.a),a["default"].use(_e.a),a["default"].use($e.a),a["default"].prototype.$message=xe.a,a["default"].prototype.$confirm=Fe.a.confirm;r("aede");var Lt=r("bc3a"),_t=r.n(Lt);_t.a.defaults.baseURL="http://192.168.10.70:8081/ncovreportsystem/",a["default"].config.productionTip=!1,a["default"].prototype.$http=_t.a,new a["default"]({router:we,render:function(e){return e(d)}}).$mount("#app")},"62a3":function(e,t,r){},8106:function(e,t,r){},"82ff":function(e,t,r){"use strict";var a=r("62a3"),o=r.n(a);o.a},"854e":function(e,t,r){},"85ec":function(e,t,r){},"881d":function(e,t,r){},aede:function(e,t,r){},b0a7:function(e,t,r){},b177:function(e,t,r){"use strict";var a=r("854e"),o=r.n(a);o.a},cacf:function(e,t,r){"use strict";var a=r("b0a7"),o=r.n(a);o.a},cf05:function(e,t,r){e.exports=r.p+"img/logo.82b9c7a5.png"},dae2:function(e,t,r){},ed4e:function(e,t,r){}});
//# sourceMappingURL=app.899ead00.js.map